@* Copyright 2014 Fabian Steeg, hbz. Licensed under the GPLv2 *@

@(ids: List[String], vals: List[com.fasterxml.jackson.databind.JsonNode], f: String)

@import helper._
@import play.api.libs.ws._
@import scala.concurrent.Future
@import scala.concurrent.ExecutionContext.Implicits.global
@import scala.concurrent._
@import scala.concurrent.duration._
@import play.api.Play.current
@import play.api.libs.json.Json

@entries() = {
    @for((id,i) <- ids.zipWithIndex; doc = Json.parse(vals(i).toString())) {
        @if(f=="details"){@tags.result_doc(doc)} else {@tags.result_short(id,doc,i,ids)}
    }
}

@main("NWBib - Merkliste") {
    @if(ids.isEmpty){
        <div class="alert alert-info text-center">
            Keine gemerkten Titel. Sie können Titel in der Trefferliste oder der Einzeltrefferanzeige durch Klicken des Sterns hinzufügen.
        </div>
    } else {
        @if(f=="details"){
          @entries
        } else {
          <table class="table table-striped table-condensed">
            <tr>
              <th style="width: 5%"></th>
              <th style="width: 60%"></th>
              <th style="width: 25%; text-align: right"></th>
              <th style="width: 5%; text-align: right"></th>
              <th style="width: 5%; text-align: right"></th>
            </tr>
            @entries
          </table>
        }
        <div class="text-center hide-in-print" id="clear-list">
            <a style="cursor:pointer;"
                onclick="$('#clear-list').html('Bestätigung: <a href=\'@nwbib.routes.Application.clearStars()\'>Merkliste dauerhaft löschen</a> | <a style=\'cursor:pointer\'; onclick=\'window.location.reload()\'>Abbrechen</a>')">
                <span class="glyphicon glyphicon-remove"></span> Merkliste löschen
            </a> |
            <a href='@nwbib.routes.Application.showStars(if(f=="details"){""} else {"details"}, ids.mkString(","))'>
              <span class="glyphicon glyphicon-info-sign"></span> @if(f=="details"){Kurzansicht} else {Detailansicht}
            </a>
        </div>
    }
    @if(flash.get("error")!=null){
        <div class="alert alert-danger">@flash.get("error")</div>
    }
}
