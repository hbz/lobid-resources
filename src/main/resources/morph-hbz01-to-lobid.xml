<?xml version="1.0" encoding="UTF-8"?>
<metamorph xmlns="http://www.culturegraph.org/metamorph" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	version="1">
	<!-- Aleph MAB2 XML to RDF - a mapping of the hbz01 catalog to lobid-resources -->
	<!-- beware: the sequence of the rules are semantically important! Don't change the order. -->
	<!-- Aleph MAB differs from MAB in that: -->
	<!-- an indicator2 exists -->
	<!-- most fields have a subfield 'a' -->
	<!-- => structure of aleph MAB: $field$indicator1$indicator2$subfield -->
	<vars>
		<var name="ns-lobid-resource" value="http://lobid.org/resources/"/>
		<var name="ns-lobid-vocab" value="http://purl.org/lobid/lv#"/>
		<var name="ns-lobid-organisation" value="http://lobid.org/organisations/"/>
		<var name="ns-zdb-services" value="http://ld.zdb-services.de/resource/"/>
		<var name="ns-gnd" value="http://d-nb.info/standards/elementset/gnd#"/>
		<var name="ns-bibo" value="http://purl.org/ontology/bibo/"/>
	</vars>
	<macros>
		<macro name="setRdfSubjectDescribedBy">
			<combine name="~rdf:subject" value="${a}">
				<data source="$[field]"/>
				<data source="@id" name="a">
					<regexp match="(.*)" format="$[ns-lobid-resource]${1}"/>
				</data>
			</combine>
		</macro>
		<macro name="setProvenance">
			<combine name="$[field_1]" value="$[ns-lobid-organisation]${a}#!" flushWith="$[field_2]">
				<choose name="a" flushWith="$[field_2]">
					<data source="$[field_2]" name="a">
						<lookup in="sigel2isilMap"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="^[hH][bB][zZ]" format="DE-605"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="^NRW$|^NRW/Hist.Buch$" format="DE-605"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="5\/NWBib" format="DE-5"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="51\/NWBib" format="DE-51"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="6\/NWBib" format="DE-6"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="61\/NWBib" format="DE-61"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="([1-9][0-9]{1,5})/Inst" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="[0]{1,3}([1-9][0-9]{1,4})/Inst" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="^([1-9])\/Inst$" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="([1-9][0-9]{1,4})" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="0([1-9][0-9]{1,4})" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="0{1,3}([1-9])$" format="DE-${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<regexp match="^292$" format="DE-101b"/>
					</data>
				</choose>
			</combine>
		</macro>
		<macro name="setRdfSubject">
			<combine name="~rdf:subject" value="${a}">
				<data source="$[field]" name="a">
					<regexp match="(.*)" format="$[ns-lobid-resource]${1}#!"/>
				</data>
			</combine>
		</macro>
		<macro name="setLabelMAB451-491ToId">
			<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${a}"
				flushWith="$[field_1]">
				<choose name="a" flushWith="$[field_1]">
					<data source="$[field_2]" name="a">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.* ; [0-9].* [a-zA-Z]*$)" format="${1}"/>
					</data>
					<data source="$[field_2]" name="a">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.*) ; [0-9]$" format="${1}"/>
					</data>
					<data source="$[field_2]">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.*) ; (.*) [0-9]$" format="${1}"/>
					</data>
					<data source="$[field_2]">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.*) ; (.*)[0-9]$" format="${1}"/>
					</data>
					<data source="$[field_2]">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.*); [0-9]" format="${1}"/>
					</data>
					<data source="$[field_2]">
						<replace pattern="&lt;&lt;|&gt;&gt;|\[|\]" with=""/>
						<regexp match="(.*)[a-zA-Z]$"/>
					</data>
				</choose>
			</combine>
		</macro>
		<macro name="createEntityForHasSuperordinateWithoutIdWithNumbering">
			<entity name="$[ns-lobid-vocab]isPartOf">
				<entity name="$[ns-lobid-vocab]hasSuperordinate">
					<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${isPartOfLiteral}">
						<if>
							<none>
								<data source="$[field_1]"/>
							</none>
						</if>
						<data source="$[field_2]" name="isPartOfLiteral">
							<regexp match="(.*) ; (.*)" format="${1}"/>
						</data>
					</combine>
				</entity>
				<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="$[ns-lobid-vocab]IsPartOfRelation">
					<if>
						<none>
							<data source="$[field_1]"/>
						</none>
					</if>
					<data source="$[field_2]"/>
				</combine>
				<combine name="$[ns-lobid-vocab]numbering" value="${a}">
					<data source="$[field_2]" name="a">
						<regexp match=".* ; (.*)" format="${1}"/>
						<replace pattern="^\[|\]$" with=""/>
					</data>
				</combine>
			</entity>
		</macro>
		<macro name="createEntityForHasSuperordinateWithoutIdAndNumbering">
			<entity name="$[ns-lobid-vocab]isPartOf">
				<entity name="$[ns-lobid-vocab]hasSuperordinate">
					<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${a}">
						<if>
							<none>
								<data source="$[field_1]"/>
								<data source="$[field_2]" name="a">
									<regexp match="(.*) +;.*" format="${1}"/>
								</data>
							</none>
						</if>
						<data source="$[field_2]" name="a"/>
					</combine>
				</entity>
				<data source="$[field_2]" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
					<regexp match=".*" format="$[ns-lobid-vocab]IsPartOfRelation"/>
				</data>
			</entity>
		</macro>
		<!-- nwbib speciality: doublette subfields => also subject chain -->
		<macro name="nwbibComplexSubjectRswkLabel">
			<combine name="@nwbibComplexSubjectRswkLabel$[field]" value="${a}" flushWith="$[field]-1">
				<data source="@doubledPreferredNameSubjectChain$[field]" name="a">
					<replace pattern="&gt;&gt;" with=""/>
					<replace pattern="&lt;&lt;" with=""/>
					<replace pattern=" " with=""/>
					<regexp match="^(.*)@.*" format="${1}"/>
				</data>
			</combine>
		</macro>
		<macro name="makeNwbibComplexSubjectId">
			<data source="@nwbibComplexSubjectRswkLabel$[field]" name="@nwbibComplexSubjectRswkId$[field]">
				<regexp match="(.*)" format="_:${1}"/>
			</data>
		</macro>
		<macro name="doubledPreferredNameSubjectChain">
			<combine name="@doubledPreferredNameSubjectChain$[field]" value="${a}"
				flushWith="$[field]-1">
				<concat delimiter="@" name="a" flushWith="$[field]-1">
					<data source="$[field]-1.a"/>
				</concat>
			</combine>
		</macro>
		<macro name="setNwbibRdfSubject">
			<combine name="~rdf:subject" value="${subject}">
				<data source="@nwbibComplexSubjectRswkLabel$[field]"/>
				<data source="@nwbibComplexSubjectRswkId$[field]" name="subject"/>
			</combine>
		</macro>
		<macro name="nwbibSubjectRswkIdSetDctSubject">
			<combine name="http://purl.org/dc/terms/subject" value="_:$[field]_${subject}"
				flushWith="@nwbibComplexSubjectRswkId$[field]" reset="true">
				<data source="@nwbibComplexSubjectRswkId$[field]" name="subject"/>
			</combine>
		</macro>
		<macro name="nwbibSubjectRswkIdSetRdfSubject">
			<combine name="~rdf:subject" value="_:$[field]_${subject}" flushWith="@nwbibComplexSubjectRswkId$[field]"
				reset="true">
				<data source="@nwbibComplexSubjectRswkId$[field]" name="subject"/>
			</combine>
		</macro>
		<macro name="nwbibSubjectRswkIdSetType">
			<data name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" source="@nwbibComplexSubjectRswkId$[field]">
				<constant value="http://www.loc.gov/mads/rdf/v1#ComplexSubject"/>
			</data>
		</macro>
		<macro name="nwibSetComplexSubjectRswkId">
			<entity name="~rdf:list@complexSubjectRswkId$[field]1" flushWith="@nwbibComplexSubjectRswkId$[field]">
				<data name="http://www.loc.gov/mads/rdf/v1#componentList" source="@nwbibComplexSubjectRswkId$[field]"/>
			</entity>
		</macro>
		<macro name="nwbibSetLobidSubject">
			<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!">
				<data source="@nwbibComplexSubjectRswkId$[field]"/>
				<data source="@nwbibComplexSubjectRswkLabel$[field]"/>
				<data source="@id" name="subject"/>
			</combine>
		</macro>
		<!-- / nwbib speciality -->
		<macro name="setBackRdfSubject">
			<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!"
				flushWith="$[field]">
				<data source="@id" name="subject"/>
			</combine>
		</macro>
		<!-- prefer gnd subjects IDs to literals -->
		<macro name="subjectRswkId">
			<combine name="@complexSubjectRswkId$[field]-$[indicator2]" value="${a}"
				flushWith="$[field]-$[indicator2]" sameEntity="true" reset="true">
				<choose name="a" flushWith="$[field]-$[indicator2]" sameEntity="true" reset="true">
					<data source="$[field]-[-12].9" name="a">
						<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
					</data>
					<data source="$[field]-$[indicator2].[acfghkpstkz-]" name="a">
						<replace pattern="&gt;" with=""/>
						<replace pattern="&lt;" with=""/>
						<regexp match="(.*)" format="_:${1}"/>
					</data>
				</choose>
			</combine>
		</macro>
		<macro name="subjectRswkIdSetDctSubject">
			<combine name="http://purl.org/dc/terms/subject" value="_:$[field]-$[indicator2]_${subject}"
				flushWith="@complexSubjectRswkId$[field]-$[indicator2]" reset="true">
				<data source="@complexSubjectRswkId$[field]-$[indicator2]" name="subject"/>
			</combine>
		</macro>
		<macro name="subjectRswkIdSetRdfSubject">
			<combine name="~rdf:subject" value="_:$[field]-$[indicator2]_${subject}"
				flushWith="@complexSubjectRswkId$[field]-$[indicator2]" reset="true">
				<data source="@complexSubjectRswkId$[field]-$[indicator2]" name="subject"/>
			</combine>
		</macro>
		<macro name="subjectRswkIdSetType">
			<data name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" source="@complexSubjectRswkId$[field]-$[indicator2]">
				<constant value="http://www.loc.gov/mads/rdf/v1#ComplexSubject"/>
			</data>
		</macro>
		<macro name="complexSubjectRswkId">
			<entity name="~rdf:list@complexSubjectRswkId$[field]$[indicator2]" reset="true"
				flushWith="@complexSubjectRswkId$[field]-$[indicator2]">
				<data name="http://www.loc.gov/mads/rdf/v1#componentList" source="@complexSubjectRswkId$[field]-$[indicator2]"/>
			</entity>
		</macro>
		<!-- prefer gnd subjects IDs to literals -->
		<macro name="subjectOrder">
			<combine name="@subjectOrder" value="${a}">
				<concat delimiter=", " name="a">
					<choose name="a" flushWith="$[field]-[-12]" sameEntity="true">
						<data source="$[field]-[-12].9">
							<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
						</data>
						<data source="$[field]-[-12].[acfghkpstkz-]"/>
					</choose>
				</concat>
			</combine>
		</macro>
		<!-- subjects without ID -->
		<macro name="dctSubject">
			<combine name="@rdfTypeSubject" value="${a}" flushWith="$[field]-[-12]" reset="true"
				sameEntity="true">
				<choose name="a" flushWith="$[field]-[-12]" sameEntity="true">
					<data source="$[field]-[-12].9">
						<regexp match="\(DE-588\)(.*)" format=""/> <!-- will be ignored -->
					</data>
					<data source="$[field]-[-12].e" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#ConferenceOrEvent"/>
					</data>
					<data source="$[field]-[-12].g" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#PlaceOrGeographicName"/>
					</data>
					<data source="$[field]-[-12].k" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#CorporateBody"/>
					</data>
					<data source="$[field]-[-12].p" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#Person"/>
					</data>
					<data source="$[field]-[-12].t" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#Work"/>
					</data>
					<data source="$[field]-[-12].?" name="a">
						<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
					</data>
				</choose>
			</combine>
		</macro>
		<!-- altLabel -->
		<macro name="altLabel">
			<combine name="@altLabel$[type]" value="${a}" flushWith="$[field]??">
				<choose name="a" flushWith="$[field]??">
					<data source="@preferredNameConcatEventEDC|@preferredNameConcatEventENDC" name="a"/>
					<concat delimiter=", " name="a" sameEntity="true" flushWith="$[field][-abcefmn][12].c">
						<data source="$[field][-abcefmn][12].p"/>
						<data source="$[field][-abcefmn][12].c"/>
					</concat>
					<data source="$[field][-abcefmn][12].[apk]" name="a">
						<replace pattern="&gt;&gt;" with=""/>
						<replace pattern="&lt;&lt;" with=""/>
					</data>
				</choose>
			</combine>
		</macro>
		<!-- setting dateOfBirth and dateOfDeath for MAB 100s -->
		<macro name="livingStatisticsSetRdfSubject">
			<combine name="~rdf:subject" value="${a}">
				<data source="$[field]"/>
				<data source="$[gndId]" name="a">
					<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
				</data>
			</combine>
		</macro>
		<macro name="dateOfBirthMAB100s">
			<combine name="$[ns-gnd]dateOfBirth" value="${a}" sameEntity="true">
				<choose name="a" flushWith="$[gndId]" sameEntity="true">
					<data source="$[field]">
						<regexp match="^([012][0-9]{3})-" format="${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^([1-9][0-9]{2})-" format="0${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^([1-9][0-9])-" format="00${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^([0-9])-" format="000${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^v([012][0-9]{3})-" format="-${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^v([1-9][0-9]{2})-" format="-0${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^v([1-9][0-9])-" format="-00${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="^v([0-9])-" format="-000${1}"/>
					</data>
				</choose>
			</combine>
		</macro>
		<macro name="dateOfDeathMAB100s">
			<combine name="$[ns-gnd]dateOfDeath" value="${a}" sameEntity="true">
				<choose name="a" flushWith="$[gndId]" sameEntity="true">
					<data source="$[field]">
						<regexp match="-([012][0-9]{3})$" format="${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-([1-9][0-9]{2})$" format="0${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-([1-9][0-9])$" format="00${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-([0-9])$" format="000${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-v([012][0-9]{3})$" format="-${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-v([1-9][0-9]{2})$" format="-0${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-v([1-9][0-9])$" format="-00${1}"/>
					</data>
					<data source="$[field]">
						<regexp match="-v([0-9])$" format="-000${1}"/>
					</data>
				</choose>
			</combine>
		</macro>
		<macro name="nonYearLivingStatistics">
			<combine name="$[ns-gnd]dateOfBirthAndDeath" value="${a}" sameEntity="true"
				flushWith="$[gndId]">
				<data source="$[field]" name="a">
					<regexp match="^ca\..*|.*Jh\."/>
				</data>
			</combine>
		</macro>
	</macros>
	<rules>
		<!-- subject as bnodes and their two properties (label & type ) -->
		<combine name="@subjectLabel" value="${a}" reset="true" sameEntity="true">
			<data source="@rdfTypeSubject">
				<regexp match="^http"/>
			</data>
			<data source="9[01234][27]-[-12].[aefghpstz-]" name="a"/>
		</combine>
		<combine value="_:${a}" name="@subjectLabelBnode">
			<data source="@subjectLabel" name="a">
				<replace pattern="&gt;" with=""/>
				<replace pattern="&lt;" with=""/>
			</data>
		</combine>
		<data source="@subjectLabelBnode" name="~rdf:subject"/>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="${a}"
			reset="true" sameEntity="true">
			<data source="@rdfTypeSubject" name="a">
				<regexp match="^(http.*)"/>
			</data>
			<data source="@subjectLabelBnode"/>
		</combine>
		<data source="@subjectLabel" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<!-- /subject as bnodes and their two properties (label & type -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@rdfTypeSubject">
			<data source="@subjectLabelBnode"/>
			<data source="@id" name="subject"/>
		</combine>
		<combine name="http://purl.org/dc/terms/subject" value="${a}"
			flushWith="@deweyId|@nwbibSubject|@nwbibSpatialSubject|@rpb2Subject|@rpbSubject" reset="true">
			<data source="@deweyId|@nwbibSubject|@nwbibSpatialSubject|@rpb2Subject|@rpbSubject"
				name="a"/>
		</combine>
		<!-- ####################### -->
		<!-- ####### Get subject uri of each record -->
		<!-- ####################### -->
		<data source="001-[-1].a" name="@id"/>
		<!-- set subject uri of main resource -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${id}#!">
			<data source="@id" name="id"/>
		</combine>
		<!-- ZDB id & collectedBy -->
		<data source="025z[-1].a" name="@idzdb"/>
		<!-- ####################### -->
		<!-- ####### hbz ID sameAs ZDB ID -->
		<!-- ####################### -->
		<data source="@idzdb" name="http://www.w3.org/2002/07/owl#sameAs">
			<regexp match="(.*)" format="$[ns-zdb-services]${1}"/>
		</data>
		<data source="@idzdb" name="$[ns-lobid-vocab]zdbID"/>
		<data source="@idzdb" name="http://purl.org/lobid/lv#inCollection">
			<regexp match=".*" format="$[ns-lobid-resource]HT014846970#!"/>
		</data>
		<!-- ####################### -->
		<!-- ####### Secondary form, link to primary form and vice versa -->
		<!-- ####################### -->
		<data source="021[-b]1.a" name="http://purl.org/dc/terms/isFormatOf">
			<regexp match="(.*)" format="$[ns-lobid-resource]${1}#!"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<!-- ####################### -->
		<!-- ####### Child, link to parent and vice versa, e.g. HT000009600 -->
		<!-- ####################### -->
		<data source="529z1.9" name="@supplement"/>
		<!-- ####################### -->
		<!-- ####### Set owl:sameAs -->
		<!-- ####################### -->
		<data source="@id" name="http://www.w3.org/2002/07/owl#sameAs">
			<regexp match="(.*)" format="http://hub.culturegraph.org/resource/HBZ-${1}"/>
		</data>
		<!-- ####################### -->
		<!-- ####### General attributes for each record -->
		<!-- ####################### -->
		<data source="@id" name="$[ns-lobid-vocab]hbzID"/>
		<data source="@id" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<regexp match=".*" format="http://purl.org/dc/terms/BibliographicResource"/>
		</data>
		<data source="025z[2].a" name="@dctIsPartOf">
			<regexp match="(.*)" format="$[ns-zdb-services]${1}"/>
		</data>
		<data source="025o[-12].a" name="@oclcNumber"/>
		<data source="@oclcNumber" name="http://www.w3.org/2002/07/owl#sameAs">
			<regexp match="(.*)" format="http://worldcat.org/oclc/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<data source="@oclcNumber" name="$[ns-bibo]oclcnum"/>
		<!-- ####################### -->
		<!-- ################ language -->
		<!-- ####################### -->
		<data source="037[-abc][-123].a" name="@639-2"/>
		<data source="@639-2" name="@language">
			<lookup in="iso639xToIso639-3-Map"/>
		</data>
		<data source="@language" name="http://purl.org/dc/terms/language">
			<regexp match="(.*)" format="http://id.loc.gov/vocabulary/iso639-2/${1}"/>
		</data>
		<!-- ####################### -->
		<!-- ########## carrier and type -->
		<!-- ####################### -->
		<!--audio -->
		<combine name="@mediumAudio" value="$[ns-bibo]AudioDocument">
			<choose>
				<data source="050.">
					<regexp match="^.....a"/>
				</data>
				<data source="062-1.a">
					<regexp match="Audio"/>
				</data>
				<data source="334-[12].a">
					<regexp match="^[Tt][oO]|Audio-CD"/>
				</data>
				<data source="9[01234][27]-1.f">
					<regexp match="Hörbuch|Tonträger"/>
				</data>
			</choose>
		</combine>
		<!-- audio cassette -->
		<data source="050." name="@mediumAudio">
			<regexp match="^.....ad" format="http://id.loc.gov/vocabulary/carriers/ss"/>
		</data>
		<data source="334-1.a" name="@mediumAudio">
			<regexp match="Kompaktkassette|MC|Tonkassette" format="http://id.loc.gov/vocabulary/carriers/ss"/>
		</data>
		<data source="@mediumAudio" name="@medium"/>
		<!--audio visual video -->
		<data source="050." name="@matVideo">
			<regexp match="^.....[bc]"/>
		</data>
		<data source="062-1.a" name="@matVideo">
			<regexp match="Video"/>
		</data>
		<data source="334-[12].a" name="@matVideo">
			<regexp match="^Bildton"/>
		</data>
		<data source="433-1.a" name="@matVideo">
			<regexp match="DVD-Video|Video.*"/>
		</data>
		<data source="9[01234][27]-1.f" name="@matVideo">
			<regexp match="DVD-Video|Video[ck]assette"/>
		</data>
		<data source="@matVideo" name="@medium">
			<regexp match=".*" format="$[ns-bibo]AudioVisualDocument"/>
		</data>
		<data source="@matVideo" name="@medium">
			<regexp match=".*" format="http://rdaregistry.info/termList/RDAMediaType/1008"/>
		</data>
		<data source="334-[12].a" name="@medium">
			<regexp match="^Bildton" format="$[ns-bibo]AudioVisualDocument"/>
		</data>
		<!-- braille -->
		<data source="050." name="@medium">
			<regexp match="^....a" format="http://purl.org/library/BrailleBook"/>
		</data>
		<data source="050." name="@medium">
			<regexp match="^....a" format="http://rdaregistry.info/termList/RDAproductionMethod/1010"/>
		</data>
		<!-- computer carriers -->
		<data source="050." name="@medium">
			<regexp match="^........[abcdefz]" format="http://rdaregistry.info/termList/RDAMediaType/1003"/>
		</data>
		<data source="058." name="@medium">
			<regexp match="^.[^r]" format="http://rdaregistry.info/termList/RDAMediaType/1003"/>
		</data>
		<combine name="@medium" value="http://rdaregistry.info/termList/RDAMediaType/1003">
			<if>
				<none>
					<data source="@1018"/>
				</none>
			</if>
			<data source="334-1.a">
				<regexp match="[eE]lektr"/>
			</data>
		</combine>
		<!-- game -->
		<data source="050." name="@rdftype">
			<regexp match="^.........a" format="http://schema.org/Game"/>
		</data>
		<!-- manuscript -->
		<data source="050." name="@medium">
			<regexp match="^.a" format="http://purl.org/ontology/bibo/Manuscript"/>
		</data>
		<!-- map -->
		<data source="050." name="@medium">
			<regexp match="^..........a" format="$[ns-bibo]Map"/>
		</data>
		<data source="433[-c].a" name="@medium">
			<regexp match="Kt.|Karte" format="$[ns-bibo]Map"/>
		</data>
		<data source="9[01234][27]-1.f" name="@medium">
			<regexp match="Altkarte|Karte|Stadtplan" format="$[ns-bibo]Map"/>
		</data>
		<!-- microform -->
		<data source="050." name="@medium">
			<regexp match="^...[abc]" format="http://rdaregistry.info/termList/RDAMediaType/1002"/>
		</data>
		<data source="057." name="@medium">
			<regexp match=".*" format="http://rdaregistry.info/termList/RDAMediaType/1002"/>
		</data>
		<data source="334-[12].a" name="@medium">
			<regexp match="^Mikrofor" format="http://rdaregistry.info/termList/RDAMediaType/1002"/>
		</data>
		<data source="40[03]-1.a" name="@medium">
			<regexp match="Mikrofiche" format="http://rdaregistry.info/termList/RDAMediaType/1002"/>
		</data>
		<data source="9[01234][27]-1.f" name="@medium">
			<regexp match="Mikroform" format="http://rdaregistry.info/termList/RDAMediaType/1002"/>
		</data>
		<!-- multimedia -->
		<data source="050." name="@medium">
			<regexp match="^.......a" format="http://iflastandards.info/ns/isbd/terms/mediatype/T1008"/>
		</data>
		<data source="334-[-12].a" name="@medium">
			<regexp match="Medienkombination" format="http://iflastandards.info/ns/isbd/terms/mediatype/T1008"/>
		</data>
		<data source="9[01234][27]-[-1].f" name="@medium">
			<regexp match="Medienkombination" format="http://iflastandards.info/ns/isbd/terms/mediatype/T1008"/>
		</data>
		<!-- online -->
		<data source="050." name="@1018">
			<regexp match="^........g" format="http://rdaregistry.info/termList/RDACarrierType/1018"/>
		</data>
		<data source="058." name="@1018">
			<regexp match="^.r" format="http://rdaregistry.info/termList/RDACarrierType/1018"/>
		</data>
		<data source="652a[-1].a" name="@1018">
			<regexp match="^[AaOo][rn]" format="http://rdaregistry.info/termList/RDACarrierType/1018"/>
		</data>
		<data source="@1018" name="@medium"/>
		<!-- picture -->
		<data source="050." name="@medium">
			<regexp match="^.....d" format="$[ns-bibo]Image"/>
		</data>
		<data source="334-[12].a" name="@medium">
			<regexp match="^Bildli" format="$[ns-bibo]Image"/>
		</data>
		<!-- print -->
		<data source="050." name="@medium">
			<regexp match="^[abcd]" format="http://rdaregistry.info/termList/RDAproductionMethod/1010"/>
		</data>
		<data source="050." name="@medium">
			<regexp match="^.......a" format="http://rdaregistry.info/termList/RDAproductionMethod/1010"/>
		</data>
		<data source="334-[12].a" name="@medium">
			<regexp match="Plakat" format="http://rdaregistry.info/termList/RDAproductionMethod/1010"/>
		</data>
		<data source="40[03]-1.a" name="@medium">
			<regexp match="Nachdruck|Reprint" format="http://rdaregistry.info/termList/RDAproductionMethod/1010"/>
		</data>
		<!-- vinyl -->
		<data source="050." name="@mediumAudio">
			<regexp match="^.....aj" format="http://purl.org/ontology/mo/Vinyl"/>
		</data>
		<data source="050." name="@mediumAudio">
			<regexp match="^.....aj" format="$[ns-bibo]AudioDocument"/>
		</data>
		<data source="334-[12].a" name="@mediumAudio">
			<regexp match="Schallplatte" format="http://purl.org/ontology/mo/Vinyl"/>
		</data>
		<data source="334-[12].a" name="@mediumAudio">
			<regexp match="Schallplatte" format="$[ns-bibo]AudioDocument"/>
		</data>
		<!-- Dini Kim , TODO dcterms:medium "rdacarrier:1044" (unmediated) -->
		<combine name="~rdf:subject" value="${a}" flushWith="@typeOnly">
			<data source="@typeOnly"/>
			<data source="@id" name="a">
				<regexp match="(.*)" format="$[ns-lobid-resource]${1}#!"/>
			</data>
		</combine>
		<data name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" source="@rdftype|@typeOnly"/>
		<data source="051." name="@article">
			<regexp match="^a|^.t|^..t|^...t|^.....t" format="$[ns-bibo]Article"/>
		</data>
		<data source="051." name="@rdftype">
			<regexp match="^[nt]" format="$[ns-bibo]MultiVolumeBook"/>
		</data>
		<!-- type is book (and also manifestation) if 050 begins with 'a' and 051 or 052 is missing 
			or 051 and 052 does not fulfill a certain pattern -->
		<combine name="@rdftype" value="$[ns-bibo]Book">
			<if>
				<none>
					<data source="@idzdb"/>
					<data source="050.">
						<regexp match="^.........a"/>
					</data>
					<data source="051.">
						<regexp match="^a"/>
					</data>
					<data source="051.">
						<regexp match="^.[mt]"/>
					</data>
					<data source="051.">
						<regexp match="^..[tm]"/>
					</data>
					<data source="051.">
						<regexp match="^...t"/>
					</data>
					<data source="051.">
						<regexp match="^....t"/>
					</data>
					<data source="051.">
						<regexp match="^.....t"/>
					</data>
					<data source="052.">
						<regexp match="^[a-zA-Z]"/>
					</data>
					<data source="@matVideo"/>
					<data source="@mediumAudio"/>
					<data source="@archived"/>
				</none>
			</if>
			<choose>
				<data source="050.">
					<regexp match="^a"/>
				</data>
				<data source="051.">
					<regexp match="^m|^s|^.x|^..x|^...x|^....[fkls]"/>
				</data>
				<data source="062-1.a">
					<regexp match="Band"/>
				</data>
				<data source="9[01234][27]-[-1].f">
					<regexp
						match="Anthologie|Atlas|Auktionskatalog|Bildband|Bilderbuch|Jugendbuch|Jugendsachbuch|Kinderbuch|Kindersachbuch|Kochbuch|Lehrbuch|Lesebuch"/>
				</data>
			</choose>
		</combine>
		<!-- music -->
		<data source="051." name="@rdftype">
			<regexp match="^.m|^..m|^...m" format="http://purl.org/ontology/mo/PublishedScore"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.mu|^...mu|^.....mu" format="http://purl.org/ontology/mo/PublishedScore"/>
		</data>
		<data source="334-1.a" name="@rdftype">
			<regexp match="Musikdruck" format="http://purl.org/ontology/mo/PublishedScore"/>
		</data>
		<data source="541[-ab]?.?" name="@rdftype">
			<regexp match=".*" format="http://purl.org/ontology/mo/PublishedScore"/>
		</data>
		<!-- amtliche Druckschrift -->
		<data source="051." name="@rdftype">
			<regexp match="^......[bfiklmorsu]" format="$[ns-lobid-vocab]OfficialPublication"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.aa|^............[bfiklmorsu]" format="$[ns-lobid-vocab]OfficialPublication"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.aa|^...aa|^.....aa" format="$[ns-lobid-vocab]OfficialPublication"/>
		</data>
		<!-- bibliography -->
		<data source="051." name="@rdftype">
			<regexp match="^.[b]|^..[b]|^...[b]" format="$[ns-lobid-vocab]Bibliography"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.b[i]|^...b[i]|^.....b[i]" format="$[ns-lobid-vocab]Bibliography"/>
		</data>
		<!-- biography -->
		<data source="051." name="@rdftype">
			<regexp match="^.[h]|^..[h]|^...[h]" format="$[ns-lobid-vocab]Biography"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.b[g]|^...b[g]|^.....b[g]" format="$[ns-lobid-vocab]Biography"/>
		</data>
		<data source="9[01234][27]-[-1].f" name="@rdftype">
			<regexp match="Autobiographie|Biographie" format="$[ns-lobid-vocab]Biography"/>
		</data>
		<!-- festschrift -->
		<data source="051." name="@rdftype">
			<regexp match="^.f|^..f|^...f" format="$[ns-lobid-vocab]Festschrift"/>
		</data>
		<!-- reference source -->
		<data source="051." name="@rdftype">
			<regexp match="^.[de]|^..[de]|^...[de]" format="$[ns-bibo]ReferenceSource"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.ez|^...ez|^.....ez" format="$[ns-bibo]ReferenceSource"/>
		</data>
		<data source="9[01234][27]-[-12].f" name="@rdftype">
			<regexp match="Bestimmungsbuch|Enzyklopädie|Werkverzeichnis|W[ö|oe]rterbuch"
				format="$[ns-bibo]ReferenceSource"/>
		</data>
		<!-- norm -->
		<data source="051." name="@rdftype">
			<regexp match="^.n|^..n|^...n" format="$[ns-bibo]Standard"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.no|^...no|^.....no" format="$[ns-bibo]Standard"/>
		</data>
		<data source="9[01234][27]-[-12].f" name="@rdftype">
			<regexp match="Norm|Richtlinie" format="$[ns-bibo]Standard"/>
		</data>
		<!-- schoolbook -->
		<data source="051." name="@rdftype">
			<regexp match="^.x|^..x|^...x" format="$[ns-lobid-vocab]Schoolbook"/>
		</data>
		<data source="9[01234][27]-[1].f" name="@rdftype">
			<regexp match="Schulbuch" format="$[ns-lobid-vocab]Schoolbook"/>
		</data>
		<!-- legislation -->
		<data source="051." name="@rdftype">
			<regexp match="^.l|^..l|^...l" format="$[ns-lobid-vocab]Legislation"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.ag|^...ag|^.....ag" format="$[ns-lobid-vocab]Legislation"/>
		</data>
		<!-- thesis -->
		<data source="051." name="@rdftype">
			<regexp match="^.[uy]|^..[uy]|^...[uy]" format="$[ns-bibo]Thesis"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.sc|^...sc|^.....sc" format="$[ns-bibo]Thesis"/>
		</data>
		<data source="519-[12].?" name="@rdftype">
			<regexp match=".*" format="$[ns-bibo]Thesis"/>
		</data>
		<!-- proceedings -->
		<data source="051." name="@rdftype">
			<regexp match="^.k|^..k|^...k" format="$[ns-bibo]Proceedings"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.ko|^...ko|^.....ko" format="$[ns-bibo]Proceedings"/>
		</data>
		<data source="9[01234][27]-[-1].f" name="@rdftype">
			<regexp match="Kongress" format="$[ns-bibo]Proceedings"/>
		</data>
		<!-- report -->
		<data source="051." name="@rdftype">
			<regexp match="^.[r]|^..[r]|^...[r]" format="http://purl.org/ontology/bibo/Report"/>
		</data>
		<data source="9[01234][27]-[-12].9" name="@rdftype">
			<regexp match="4128022-2" format="http://purl.org/ontology/bibo/Report"/>
		</data>
		<data source="9[01234][27]-[1].f" name="@rdftype">
			<regexp match="Bericht|Erlebnisbericht|Forschungsbericht|Literaturbericht|Reisebericht"
				format="http://purl.org/ontology/bibo/Report"/>
		</data>
		<!-- statistics -->
		<data source="051." name="@rdftype">
			<regexp match="^.s|^..s|^...s" format="http://purl.org/lobid/lv#Statistics"/>
		</data>
		<data source="052." name="@rdftype">
			<regexp match="^.st|^..st|^...st|^....st|^.....st|^......st" format="http://purl.org/lobid/lv#Statistics"/>
		</data>
		<!-- 052: type -->
		<data source="052." name="@article">
			<regexp match="^[af]|^.au|^...au|^.....au" format="$[ns-bibo]Article"/>
		</data>
		<data source="052." name="@collection">
			<regexp match="^[jp].*|^.il.*|^...il.*|^.....il.*" format="$[ns-bibo]Periodical"/>
		</data>
		<data source="9[01234][27]-[-1].f" name="@collection">
			<regexp match="Zeitschrift" format="$[ns-bibo]Periodical"/>
		</data>
		<combine name="@collection" value="${a}">
			<if>
				<none>
					<data source="540[-ab][-1].[ab]"/>
				</none>
			</if>
			<data source="052." name="a">
				<regexp match="^r|^.se|^...se|^.....se" format="$[ns-bibo]Series"/>
			</data>
		</combine>
		<data source="9[01234][27]-[1].f" name="@collection">
			<regexp match="Schriftenreihe" format="$[ns-bibo]Series"/>
		</data>
		<data source="@collection" name="@typeOnly"/>
		<!-- newspaper -->
		<data source="052." name="@collection">
			<regexp match="^z|^.[ae]o|^...[ae]o|^.....[ae]o" format="$[ns-bibo]Newspaper"/>
		</data>
		<data source="052." name="@collection">
			<regexp match="^z|^.[url]p|^...[url]p|^.....[url]p" format="$[ns-bibo]Newspaper"/>
		</data>
		<data source="9[01234][27]-[-1].f" name="@collection">
			<regexp match="Zeitung" format="$[ns-bibo]Newspaper"/>
		</data>
		<!-- computer carrier (disks etc) -->
		<data source="058." name="@medium">
			<regexp match="^.[^r]" format="http://rdaregistry.info/termList/RDAMediaType/1003"/>
		</data>
		<!-- electronic -->
		<!-- looking for Blu-ray, Cartridge, CD, Diskette, DVD, Festplatte, HD-DVD, Kassette, USB -->
		<data source="652a[-1].a" name="@medium">
			<regexp match="^[BbCcDdHhFfKkUu][AaDdEeIiLlSsVv]" format="http://rdaregistry.info/termList/RDAMediaType/1003"/>
		</data>
		<data source="@medium" name="http://purl.org/dc/terms/medium"/>
		<!-- set default medium -->
		<combine name="@medium" value="$[ns-lobid-vocab]Miscellaneous" flushWith="record">
			<if>
				<none>
					<data source="@medium">
						<regexp match=".*"/>
					</data>
				</none>
			</if>
			<data source="@id"/>
		</combine>
		<data source="@article" name="@rdftype"/>
		<combine name="@containedIn" value="${a}">
			<data source="@dctIsPartOfHbzIdArticle|@dctIsPartOfArticle" name="a"/>
			<data source="@article"/>
		</combine>
		<combine name="$[ns-lobid-vocab]containedIn" value="${a}">
			<data source="@containedIn" name="a">
				<sanitizeUrl></sanitizeUrl>
			</data>
		</combine>
		<combine name="@typeOnly" value="${a}">
			<if>
				<none>
					<data source="052.">
						<regexp
							match="^........([dcwesmbqfaghtz])|^.........([dcwesmbqfaghtz])|^..........([dcwesmbqfaghtz])"/>
					</data>
					<data source="542[-ab][-1].[a]"/>
				</none>
			</if>
			<choose name="a">
				<data source="9[01234][27][-a][-1].f" name="a">
					<regexp match="^Aufsatzsammlung" format="$[ns-lobid-vocab]EditedVolume"/>
				</data>
				<data source="9[01234][27][-a][-1].9" name="a">
					<regexp match="4143413" format="$[ns-lobid-vocab]EditedVolume"/>
				</data>
			</choose>
		</combine>
		<!-- set default type -->
		<combine name="@rdftype" value="$[ns-lobid-vocab]Miscellaneous" flushWith="record">
			<if>
				<none>
					<data source="@rdftype"/>
					<data source="@typeOnly"/>
				</none>
			</if>
			<data source="@id"/>
		</combine>
		<!-- ####################### -->
		<!-- ########## title -->
		<!-- ####################### -->
		<data source="304[-a]1.a" name="http://purl.org/dc/terms/alternative"/>
		<data source="310[-ab][-12].a" name="@title310"/>
		<data source="@title310" name="@title"/>
		<!-- has other title information. If no title exists yet, use these (331 or 333) as title. -->
		<data source="331[-ab][-1].a" name="@titleRemainder331"/>
		<data source="333[-ab][-1].a" name="@titleRemainder333"/>
		<combine name="@titleRemainder2title331" value="${title}">
			<if>
				<none>
					<data source="@title"/>
					<data source="@titleRemainder331Superordination"/>
					<data source="085x1.l"/>
				</none>
			</if>
			<data source="@titleRemainder331" name="title"/>
		</combine>
		<combine name="@titleRemainder2title333" value="${title}">
			<if>
				<none>
					<data source="@title"/>
					<data source="@titleRemainder331"/>
				</none>
			</if>
			<data source="@titleRemainder333" name="title"/>
		</combine>
		<combine name="@085" value="${a}">
			<concat delimiter=" / " name="a">
				<data source="085x1.l"/>
			</concat>
			<data source="@titleRemainder331"/>
		</combine>
		<combine name="@titleRemainder2title331+085" value="${a}">
			<concat delimiter=" / " name="a">
				<data source="@titleRemainder331"/>
				<data source="@085"/>
			</concat>
		</combine>
		<combine name="@otherTitle" value="${titleRemainder}">
			<if>
				<none>
					<data source="@titleRemainder2title331"/>
					<data source="@titleRemainder331Superordination"/>
				</none>
			</if>
			<data source="@titleRemainder331" name="titleRemainder"/>
		</combine>
		<combine name="http://rdaregistry.info/Elements/u/P60327" value="${corporateBody4Title}">
			<if>
				<none>
					<data source="@titleRemainder2title333"/>
				</none>
			</if>
			<data source="@titleRemainder333" name="corporateBody4Title"/>
		</combine>
		<!-- deliberatley not everything linked with OR '|' because of performance problems -->
		<data source="335[-abcd][-1].a" name="@otherTitle"/>
		<data source="34[01234567][-ab][-1].[ab]" name="http://purl.org/dc/terms/alternative"/>
		<data source="376[-adb][-1].[ad]" name="$[ns-bibo]shortTitle"/>
		<data source="504-1.a" name="http://purl.org/dc/terms/alternative"/>
		<data source="@otherTitle" name="http://rdaregistry.info/Elements/u/P60493">
			<replace pattern="&gt;" with=""/>
			<replace pattern="&lt;" with=""/>
		</data>
		<data source="675[-abcd][-12].a" name="$[ns-lobid-vocab]titleKeyword"/>
		<!-- generating title using the superordination -->
		<data source="331[-ab][2].a" name="@titleRemainder331Superordination"/>
		<!-- ... by concatenating fields. Two fields are optional, one mandatory -->
		<combine name="@titleRemainder331Superordination2title" value="${a}${b}${c}"
			flushWith="@titleRemainder331Superordination">
			<data source="@titleRemainder331Superordination" name="a"/>
			<choose name="b" flushWith="@titleRemainder331Superordination">
				<data source="090-[-1].a">
					<regexp match="(.*)" format=", ${1}"/>
				</data>
				<data source="089-[-1].a">
					<regexp match="(.*)" format=", ${1}"/>
				</data>
			</choose>
			<data source="@titleRemainder331" name="c">
				<regexp match="(.*)" format=": ${1}"/>
			</data>
		</combine>
		<combine name="http://purl.org/dc/terms/title" value="${a}">
			<choose name="a">
				<data source="@titleRemainder331Superordination2title">
					<replace pattern="&gt;" with=""/>
					<replace pattern="&lt;" with=""/>
				</data>
				<data source="@title310">
					<replace pattern="&gt;" with=""/>
					<replace pattern="&lt;" with=""/>
				</data>
				<data source="@titleRemainder2title331+085">
					<replace pattern="&gt;" with=""/>
					<replace pattern="&lt;" with=""/>
				</data>
				<data source="@titleRemainder2title333">
					<replace pattern="&gt;" with=""/>
					<replace pattern="&lt;" with=""/>
				</data>
			</choose>
		</combine>
		<data source="360-[12].a" name="@titleOfSubSeries"/>
		<combine name="http://rdaregistry.info/Elements/u/P60517" value="${a}">
			<concat delimiter=". " name="a">
				<data source="@titleOfSubSeries" name="a"/>
			</concat>
		</combine>
		<!-- ####################### -->
		<!-- ########## predecessor and successor -->
		<!-- ####################### -->
		<combine name="@predecessorHbzId" value="${a}">
			<data source="531[-xyz]1.9" name="a">
				<regexp match="(.*)" format="$[ns-lobid-resource]${1}"/>
			</data>
		</combine>
		<combine name="@predecessorLabel" flushWith="531[-xyz]1.a" value="${a}">
			<choose name="a" flushWith="531[-xyz]1.a">
				<data source="531[-xyz]1.a">
					<regexp match="&lt;&lt;(.*)&gt;&gt;(.*)"/>
					<replace pattern="&gt;&gt;" with=""/>
					<replace pattern="&lt;&lt;" with=""/>
				</data>
				<data source="531[-xyz]1.a"/>
			</choose>
		</combine>
		<data source="@predecessorHbzId" name="http://rdaregistry.info/Elements/u/P60261"/>
		<combine name="~rdf:subject" value="${a}" flushWith="@predecessorHbzId">
			<data source="@predecessorHbzId" name="a"/>
		</combine>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${a}"
			flushWith="@predecessorHbzId">
			<data source="@predecessorLabel" name="a"/>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@predecessorHbzId">
			<data source="@id" name="subject"/>
		</combine>
		<combine name="@successorHbzId" value="${a}">
			<data source="533[-xyz]1.9" name="a">
				<regexp match="(.*)" format="$[ns-lobid-resource]${1}"/>
			</data>
		</combine>
		<combine name="@successorLabel" flushWith="533[-xyz]1.a" value="${a}">
			<choose name="a" flushWith="533[-xyz]1.a">
				<data source="533[-xyz]1.a">
					<regexp match="&lt;&lt;(.*)&gt;&gt;(.*)"/>
					<replace pattern="&gt;&gt;" with=""/>
					<replace pattern="&lt;&lt;" with=""/>
				</data>
				<data source="533[-xyz]1.a"/>
			</choose>
		</combine>
		<data source="@successorHbzId" name="http://rdaregistry.info/Elements/u/P60278"/>
		<combine name="~rdf:subject" value="${a}" flushWith="@successorHbzId">
			<data source="@successorHbzId" name="a"/>
		</combine>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${a}"
			flushWith="@successorHbzId">
			<data source="@successorLabel" name="a"/>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@successorHbzId">
			<data source="@id" name="subject"/>
		</combine>
		<!-- ####################### -->
		<!-- ########## geo coordinates -->
		<!-- ####################### -->
		<data source="407-[123].a" name="http://rdaregistry.info/Elements/u/P60345">
			<regexp match="\((.*)\)" format="${1}"/>
		</data>
		<!-- ####################### -->
		<!-- ########## publisher -->
		<!-- ####################### -->
		<!-- primary publication -->
		<!-- <replace pattern="^\[" with=""/> <replace pattern="\]$" with=""/> -->
		<data source="41[05][-abcu][-12].a|419-[12].a|594[-abc][-12].a" name="@placeOfPublication_"/>
		<choose name="@placeOfPublication" flushWith="@placeOfPublication_">
			<data source="@placeOfPublication_">
				<regexp match="^\[.*\]"/>
				<replace pattern="^\[" with=""/>
				<replace pattern="\]$" with=""/>
				<replace pattern="[sS]\.l\." with=""/>
			</data>
			<data source="@placeOfPublication_"/>
		</choose>
		<data source="41[27][-abcu][-12].[ag]|419-[12].b" name="@publisher">
			<replace pattern="&gt;" with=""/>
			<replace pattern="&lt;" with=""/>
			<replace pattern="^\[[sS]\.n\.\]$" with=""/>
		</data>
		<choose name="@startDateFirstPublication">
			<!-- issue precedence -->
			<!-- Multiple resource have [determined] volume numbers in this field. -->
			<if>
				<none>
					<data source="425-[-1].a">
						<regexp match="-(\d{4})|-....."/>
					</data>
				</none>
			</if>
			<data source="425[ab-p][-1].a|419-1c|595-[-12].a">
				<regexp match="1\d{3}|20\d{2}"/>
			</data>
			<data source="089-[-1].a">
				<regexp match="(.*)\. (1\d{3})|(.*)\. (20\d{2})" format="${2}"/>
			</data>
		</choose>
		<entity name="http://schema.org/publication" flushWith="record">
			<data source="@placeOfPublication" name="http://schema.org/location"/>
			<data source="@publisher" name="http://schema.org/publishedBy"/>
			<data source="@startDateFirstPublication" name="http://schema.org/startDate"/>
			<!-- range of date. Only if 021 not exists but 425c. Take 4 digits. -->
			<choose name="http://schema.org/endDate">
				<if>
					<none>
						<data source="021[-b]1.a"/>
					</none>
				</if>
				<data source="425c[-1].a">
					<regexp match="[12]\d{3}"/>
				</data>
			</choose>
			<!-- ####################### -->
			<!-- ########## frequency -->
			<!-- ####################### -->
			<!-- proceedings -->
			<choose name="http://id.loc.gov/ontologies/bibframe/frequency">
				<data source="052.">
					<regexp match="^........t|^.........t|^..........t" format="http://marc21rdf.info/terms/continuingfre#i"/>
				</data>
				<data source="052.">
					<regexp
						match="^........([dcwesmbqfaghz])|^.........([dcwesmbqfaghz])|^..........([dcwesmbqfaghz])"
						format="http://marc21rdf.info/terms/continuingfre#${1}"/>
				</data>
			</choose>
			<!-- if 523-1p and 523-1a -->
			<combine name="http://id.loc.gov/ontologies/bibframe/note" value="${p}${a}">
				<data source="523[-a][-1].p" name="p">
					<regexp match="(.*)" format="${1}: "/>
				</data>
				<data source="523[-a][-1].a" name="a"/>
			</combine>
			<!-- if only 523-1a -->
			<combine name="http://id.loc.gov/ontologies/bibframe/note" value="${a}">
				<if>
					<none>
						<data source="523[-a][-1].p"/>
					</none>
				</if>
				<data source="523[-a][-1].a" name="a"/>
			</combine>
			<data source="@publisher|@startDateFirstPublication|@placeOfPublication" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
				<constant value="http://schema.org/PublicationEvent"/>
			</data>
		</entity>
		<!-- secondary publication -->
		<data source="610[-a]1.a" name="@descriptionOfSecondaryPublication"/>
		<data source="611[-a]1.a" name="@placeOfSecondaryPublication"/>
		<data source="613[-a]1.a" name="@secondaryPublisher"/>
		<choose name="@startDateSecondaryPublication">
			<data source="619[-ab][-1].b">
				<regexp match="([12]\d{3})" format="${1}"/>
			</data>
			<data source="619[-ab][-1].a">
				<regexp match="^([12]\d{3}).[-/].([12]\d{3})" format="${1}"/>
			</data>
			<data source="619[-ab][-1].a">
				<regexp match="([12]\d{3})" format="${1}"/>
			</data>
			<data source="619[-ab][-1].c">
				<regexp match="([12]\d{3})" format="${1}"/>
			</data>
		</choose>
		<choose name="@endDateSecondaryPublication">
			<data source="619[-ab][-1].c">
				<regexp match="([12]\d{3})" format="${1}"/>
			</data>
			<data source="619[-ab][-1].a">
				<regexp match="([12]\d{3}).[-/].([12]\d{3})" format="${2}"/>
			</data>
		</choose>
		<entity name="http://schema.org/publication" flushWith="record">
			<data source="@placeOfSecondaryPublication" name="http://schema.org/location"/>
			<data source="@secondaryPublisher" name="http://schema.org/publishedBy"/>
			<data source="@descriptionOfSecondaryPublication" name="http://purl.org/dc/terms/description"/>
			<data source="@startDateSecondaryPublication" name="http://schema.org/startDate"/>
			<data source="@endDateSecondaryPublication" name="http://schema.org/endDate"/>
			<data
				source="@secondaryPublisher|@startDateSecondaryPublication|@endDateSecondaryPublication|@placeOfSecondaryPublication|@descriptionOfSecondaryPublication"
				name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
				<constant value="http://purl.org/lobid/lv#SecondaryPublicationEvent"/>
			</data>
		</entity>
		<!-- |674[-abc][-12].a <= YearOfPublication of the primary form. TODO find property -->
		<combine name="@contentOfNatureGndId" value="${a}">
			<data source="064[a][1].9" name="a">
				<regexp match="^(\(DE-588\))?(\d{3}.*)" format="http://d-nb.info/gnd/${2}"/>
			</data>
		</combine>
		<data source="@contentOfNatureGndId" name="http://rdaregistry.info/Elements/u/P60584"/>
		<combine name="~rdf:subject" value="${a}" flushWith="@contentOfNatureGndId">
			<data source="@contentOfNatureGndId" name="a"/>
		</combine>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="${a}"
			flushWith="@contentOfNatureGndId">
			<data source="064a1.a" name="a"/>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@contentOfNatureGndId">
			<data source="@id" name="subject"/>
		</combine>
		<!-- ####################### -->
		<!-- ########## description extent -->
		<!-- ####################### -->
		<data source="433[-abc][-1].[aq]" name="http://id.loc.gov/ontologies/bibframe/extent"/>
		<!-- ####################### -->
		<!-- ################ edition -->
		<!-- ####################### -->
		<combine name="$[ns-bibo]edition" value="${a}">
			<choose name="a">
				<data source="400-1.[an]"/>
				<data source="403-1.[an]"/>
				<data source="510-1.a"/>
			</choose>
		</combine>
		<!-- ################ Hochschulschriftenvermerk aka thesisInformation -->
		<concat delimiter=", " name="http://rdaregistry.info/Elements/u/P60489">
			<data source="519-1.[ap]"/>
		</concat>
		<combine name="http://rdaregistry.info/Elements/u/P60489" value="${c}, ${b}, ${d}">
			<data source="520-1.c" name="c"/>
			<data source="520-1.b" name="b"/>
			<data source="520-1.d" name="d"/>
		</combine>
		<!-- ####################### -->
		<!-- ########## links to the fulltext, online doi, toc etc. -->
		<!-- ####################### -->
		<!-- doi -->
		<data source="552[ab][-1].a" name="@doi">
			<replace pattern=" " with=""/>
			<regexp match="^(10.(\d)+/(\S)+).*" format="${1}"/>
		</data>
		<data source="@doi" name="http://umbel.org/umbel#isLike">
			<regexp match="(.*)" format="http://dx.doi.org/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<data source="@doi" name="$[ns-bibo]doi">
		</data>
		<!-- urn -->
		<combine name="@urn" value="${a}">
			<choose name="a">
				<data source="552b[-1].a">
					<regexp match="(urn:.*\d+)$" format="${1}"/>
				</data>
				<data source="552b[-1].a">
					<regexp match="^(nbn:de:.*\d)$" format="urn:${1}"/>
				</data>
			</choose>
		</combine>
		<data source="URN-1.a" name="@urn">
			<regexp match="(urn:.*\d+)$" format="${1}"/>
		</data>
		<data source="@urn" name="$[ns-lobid-vocab]urn"/>
		<data source="@urn" name="http://umbel.org/umbel#isLike">
			<regexp match="(.*)" format="http://nbn-resolving.de/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<!-- fulltext online , if 655 AND 334 exists with "[eE][lL]"ektro.. -->
		<data source="655[-e][ -1].u" name="@linkContent">
			<sanitizeUrl></sanitizeUrl>
		</data>
		<combine value="${a}" name="@linkUri" flushWith="655[-e][ -1]">
			<data source="@linkContent" name="a"/>
		</combine>
		<!-- ####################### -->
		<!-- ################ items -->
		<!-- ####################### -->
		<!-- reset Item id for we will coin a new one <data source="088 ?.a" name="~rdf:subject"> -->
		<data source="088 ?.a" name="@sigel2isilMap">
			<lookup in="sigel2isilMap"/>
		</data>
		<combine name="@itemId" value="http://lobid.org/items/${id}:${isil}:${signature}#!"
			flushWith="088??" reset="false">
			<if>
				<data source="@sigel2isilMap"/>
			</if>
			<data source="@id" name="id"/>
			<data source="088 ?.c" name="signature">
				<urlescape></urlescape>
			</data>
			<data source="@sigel2isilMap" name="isil"/>
		</combine>
		<!-- new coined subject uri of the Item -->
		<data source="@itemId" name="~rdf:subject"/>
		<data source="@itemId" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<regexp match=".*" format="http://id.loc.gov/ontologies/bibframe/Item"/>
		</data>
		<data source="@itemId" name="http://www.w3.org/2007/05/powder-s#describedby">
			<regexp match="(.*)#!" format="${1}"/>
		</data>
		<combine name="http://id.loc.gov/ontologies/bibframe/itemOf" value="$[ns-lobid-resource]${id}#!">
			<data source="@id" name="id"/>
			<data source="@itemId"/>
		</combine>
		<combine name="http://id.loc.gov/ontologies/bibframe/heldBy" value="$[ns-lobid-organisation]${isil}"
			sameEntity="true">
			<data source="@itemId"/>
			<data source="@sigel2isilMap" name="isil"/>
		</combine>
		<combine name="http://id.loc.gov/ontologies/bibframe/note" value="${a}"
			sameEntity="true">
			<data source="@itemId"/>
			<data source="088 ?.b" name="a"/>
		</combine>
		<combine name="@signature" value="${signature}" sameEntity="true">
			<data source="@itemId"/>
			<data source="088 ?.c" name="signature"/>
		</combine>
		<data source="@signature" name="http://purl.org/lobid/lv#callNumber"/>
		<data source="@signature" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<!-- provenance -->
		<combine name="http://www.w3.org/2007/05/powder-s#describedby" value="$[ns-lobid-resource]${a}"
			flushWith="002[ab]1.a">
			<data source="@id" name="a"/>
		</combine>
		<combine name="~rdf:subject" value="${a}">
			<data source="002[ab]1.a"/>
			<data source="@id" name="a">
				<regexp match="(.*)" format="$[ns-lobid-resource]${1}"/>
			</data>
		</combine>
		<combine name="http://purl.org/dc/terms/created" value="${a}">
			<data source="002[ab]1.a" name="a">
				<regexp match="([0-9]{8})" format="${1}"/>
			</data>
		</combine>
		<!-- set subject uri of resource anew -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${id}#!">
			<data source="002[ab]1.a"/>
			<data source="@id" name="id"/>
		</combine>
		<call-macro name="setRdfSubjectDescribedBy" field="070a1.a"/>
		<call-macro name="setProvenance" field_1="http://schema.org/provider"
			field_2="070a1.a"/>
		<!-- set subject uri of resource anew -->
		<call-macro name="setBackRdfSubject" field="070a1.a"/>
		<call-macro name="setRdfSubjectDescribedBy" field="070-1.a"/>
		<call-macro name="setProvenance" field_1="http://schema.org/sourceOrganization"
			field_2="070-1.a"/>
		<call-macro name="setBackRdfSubject" field="070-1.a"/>
		<call-macro name="setRdfSubjectDescribedBy" field="070b1.a"/>
		<call-macro name="setProvenance" field_1="http://open-services.net/ns/core#modifiedBy"
			field_2="070b1.a"/>
		<call-macro name="setBackRdfSubject" field="070b1.a"/>
		<combine name="~rdf:subject" value="${a}">
			<data source="003-1.a"/>
			<data source="@id" name="a">
				<regexp match="(.*)" format="$[ns-lobid-resource]${1}"/>
			</data>
		</combine>
		<combine name="http://purl.org/dc/terms/modified" value="${a}">
			<data source="003-1.a" name="a">
				<regexp match="([0-9]{8})" format="${1}"/>
			</data>
		</combine>
		<!-- set subject uri of resource anew -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${id}#!">
			<data source="003-1.a" name="a"/>
			<data source="@id" name="id"/>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${id}#!">
			<data source="@id" name="id"/>
			<data source="@itemId"/>
		</combine>
		<data source="@itemId" name="http://id.loc.gov/ontologies/bibframe/hasItem"/>
		<!-- ####################### -->
		<!-- ########## multi-volume information -->
		<!-- ####################### -->
		<data source="001-2.a" name="@idVolume"/>
		<entity name="$[ns-lobid-vocab]isPartOf">
			<data source="@idVolume" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
				<regexp match=".*" format="$[ns-lobid-vocab]IsPartOfRelation"/>
			</data>
			<combine name="$[ns-lobid-vocab]hasSuperordinate" value="$[ns-lobid-resource]${a}#!">
				<data source="@idVolume" name="a"/>
			</combine>
			<choose name="$[ns-lobid-vocab]numbering">
				<data source="090-[-1].a"/>
				<data source="089-[-1].a"/>
			</choose>
		</entity>
		<!-- ####################### -->
		<!-- ####### contributors -->
		<!-- ####################### -->
		<!-- person links -->
		<data source="1[02468][048][-amn][12].9|1[13579][26][-amn][12].9" name="@GNDPersonId">
			<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<!-- literals of creator (seems there are no corporateBodyCreators without gndID) -->
		<data source="359[-ab][-12].a" name="http://id.loc.gov/ontologies/bibframe/responsibilityStatement"/>
		<data source="1[02468][048][-aemn][12].[pa]|1[13579][26][-aemn][12].[pa]" name="@creatorPersonLabel"/>
		<!-- bnode for creator when no ID -->
		<combine name="@bnodeCreatorPersonLabel" value="_:${a}">
			<if>
				<none>
					<data source="@GNDPersonId"/>
				</none>
			</if>
			<data source="@creatorPersonLabel" name="a">
				<replace pattern="&gt;" with=""/>
				<replace pattern="&lt;" with=""/>
			</data>
		</combine>
		<choose name="@creatorPersonOrCoorporateBodyBnodeOrId" flushWith="@GNDPersonId|@bnodeCreatorPersonLabel|@creatorCorporateBodyId">
			<data source="@GNDPersonId"/>
			<data source="@creatorCorporateBodyId"/>
			<data source="@bnodeCreatorPersonLabel"/>
		</choose>
		<!-- bnode for contributor when no ID -->
		<data source="1[02468][048][bcf]1.[pa]|1[13579][26][bcf]1.[pa]|8[012][02468][-mn]-12.[pa]"
			name="@contributorPersonLabel"/>
		<combine name="@bnodeContributorPersonLabel" value="_:${a}">
			<data source="@contributorPersonLabel" name="a">
				<replace pattern="&gt;" with=""/>
				<replace pattern="&lt;" with=""/>
			</data>
		</combine>
		<choose name="@contributorPersonBnodeOrId" flushWith="1????">
			<data source="@contributorPersonId"/>
			<data source="@bnodeContributorPersonLabel"/>
		</choose>
		<data source="2[02468][048][bcf]1.[pa]|2[13579][26][bcf]1.[pa]|200-1.a" name="@contributorCoorporateBodyLabel"/>
		<combine name="@bnodeContributorBodyLabel" value="_:${a}">
			<data source="@contributorCoorporateBodyLabel" name="a">
				<replace pattern="&gt;" with=""/>
				<replace pattern="&lt;" with=""/>
			</data>
		</combine>
		<choose name="@contributorCorporateBodyBnodeOrId" flushWith="2????">
			<data source="@contributorCorporateBodyId"/>
			<data source="@bnodeContributorBodyLabel"/>
		</choose>
		<!-- ####################### -->
		<!-- ################ koerperschaften -->
		<!-- ####################### -->
		<data source="2?[02468][-a][12].9" name="@creatorCorporateBodyId">
			<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<data source="[29]?[02468][-a][12].k" name="@nameOfCreatingCorporateBodyK">
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<data source="[29]?[02468][-a][12].h" name="@nameOfCreatingCorporateBodyH"/>
		<combine name="@nameOfCreatingCorporateBodyKH" value="${k} (${h})" sameEntity="true">
			<data source="@nameOfCreatingCorporateBodyK" name="k"/>
			<data source="@nameOfCreatingCorporateBodyH" name="h"/>
		</combine>
		<combine name="@nameOfCreatingCorporateBodyB" value="${a}" sameEntity="true">
			<concat delimiter=", " name="a" flushWith="@creatorCorporateBodyId|@subjectLinks">
				<data source="[29]?[02468][-a][12].b"/>
			</concat>
		</combine>
		<combine name="@nameOfCreatingCorporateBodyKB" value="${k}. ${b}" sameEntity="true">
			<data source="@nameOfCreatingCorporateBodyB" name="b"/>
			<data source="@nameOfCreatingCorporateBodyK" name="k"/>
		</combine>
		<combine name="@nameOfCreatingCorporateBodyKHB" value="${k} (${h}). ${b}"
			sameEntity="true">
			<data source="@nameOfCreatingCorporateBodyB" name="b"/>
			<data source="@nameOfCreatingCorporateBodyH" name="h"/>
			<data source="@nameOfCreatingCorporateBodyK" name="k"/>
		</combine>
		<combine name="@nameOfCreatingCorporateBody" value="${a}" sameEntity="true"
			flushWith="@creatorCorporateBodyId"> <!-- no Verweisungsformen (aka alternate labels) -->
			<choose name="a" flushWith="@creatorCorporateBodyId">
				<data source="@nameOfCreatingCorporateBodyKHB"/>
				<data source="@nameOfCreatingCorporateBodyKB"/>
				<data source="@nameOfCreatingCorporateBodyKH"/>
				<data source="@nameOfCreatingCorporateBodyK"/>
			</choose>
		</combine>
		<combine name="@nameOfSubjectCorporateBody" value="${a}" sameEntity="true"
			flushWith="@subjectLinks">
			<choose name="a" flushWith="@subjectLinks">
				<data source="@nameOfCreatingCorporateBodyKHB"/>
				<data source="@nameOfCreatingCorporateBodyKB"/>
				<data source="@nameOfCreatingCorporateBodyKH"/>
				<data source="@nameOfCreatingCorporateBodyK"/>
			</choose>
		</combine>
		<data source="2?[02468][-a][12].g" name="@nameOfCreatingCorporateBodyG"/>
		<!-- only contributor, not creator -->
		<data source="2?[02468][bcfep][12].k" name="@nameOfContributingCorporateBodyK">
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<data source="2?[02468][bcfep][12].h" name="@nameOfContributingCorporateBodyH"/>
		<combine name="@nameOfContributingCorporateBodyKH" value="${k} (${h})">
			<data source="@nameOfContributingCorporateBodyK" name="k"/>
			<data source="@nameOfContributingCorporateBodyH" name="h"/>
		</combine>
		<combine name="@nameOfContributingCorporateBodyB" value="${a}">
			<concat delimiter=", " name="a" flushWith="@contributorCorporateBodyId">
				<data source="2?[02468][bcfep][12].b"/>
			</concat>
		</combine>
		<combine name="@nameOfContributingCorporateBodyKB" value="${k}. ${b}">
			<data source="@nameOfContributingCorporateBodyK" name="k"/>
			<data source="@nameOfContributingCorporateBodyB" name="b"/>
		</combine>
		<combine name="@nameOfContributingCorporateBodyKHB" value="${k} (${h}). ${b}">
			<data source="@nameOfContributingCorporateBodyB" name="b"/>
			<data source="@nameOfContributingCorporateBodyH" name="h"/>
			<data source="@nameOfContributingCorporateBodyK" name="k"/>
		</combine>
		<combine name="@nameOfContributingCorporateBody" value="${a}"
			flushWith="@contributorCorporateBodyId">
			<choose name="a" flushWith="@contributorCorporateBodyId">
				<data source="@nameOfContributingCorporateBodyKHB"/>
				<data source="@nameOfContributingCorporateBodyKB"/>
				<data source="@nameOfContributingCorporateBodyKH"/>
				<data source="@nameOfContributingCorporateBodyK"/>
			</choose>
		</combine>
		<data source="2?[02468][bcefp][12].9" name="@contributorCorporateBodyId">
			<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
		</data>
		<data source="[29]??[-abcfep][12].e" name="@preferredNameConcatEventE"/>
		<combine name="@preferredNameConcatEventEDC" value="${e}, ${d}, ${c}"
			sameEntity="true">
			<data source="@preferredNameConcatEventE" name="e"/>
			<data source="[29]??[-abcfep][12].d" name="d"/>
			<data source="[29]??[-abcfep][12].c" name="c"/>
		</combine>
		<combine name="@preferredNameConcatEventENDC" value="${n} ${e}, ${d}, ${c}"
			sameEntity="true">
			<data source="[29]??[-abcfep][12].n" name="n"/>
			<data source="[29]??[-abcfep][12].e" name="e"/>
			<data source="[29]??[-abcfep][12].d" name="d"/>
			<data source="[29]??[-abcfep][12].c" name="c"/>
		</combine>
		<data
			source="@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId|@creatorPersonOrCoorporateBodyBnodeOrId"
			name="@agentId"/>
		<combine value="_:${a}${b}" name="@contributionBnode" sameEntity="true">
			<data source="@agentId" name="a"/>
			<data source="@relator" name="b"/>
		</combine>
		<combine name="@relatorNode" value="${a}">
			<data source="@relator" name="a"/>
			<data source="@agentId"/>
		</combine>
		<combine name="~rdf:subject" value="${a}" flushWith="@relatorNode">
			<data source="@contributionBnode" name="a"/>
		</combine>
		<combine name="http://id.loc.gov/ontologies/bibframe/role" value="${a}"
			sameEntity="true" flushWith="@relatorNode">
			<data source="@relatorNode" name="a"/>
			<data source="@contributionBnode"/>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://id.loc.gov/ontologies/bibframe/Contribution"
			flushWith="@relatorNode" sameEntity="true">
			<data source="@contributionBnode"/>
		</combine>
		<combine name="http://id.loc.gov/ontologies/bibframe/agent" value="${a}"
			flushWith="@relatorNode">
			<data source="@agentId" name="a"/>
		</combine>
		<!-- set subject uri of resource anew -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!">
			<data source="@id" name="subject"/>
			<data source="@relatorNode|@contributionBnode"/>
			<data source="@agentId"/>
		</combine>
		<entity name="~rdf:list" reset="true">
			<combine name="http://id.loc.gov/ontologies/bibframe/contribution" value="${a}"
				sameEntity="true" reset="true">
				<data source="@contributionBnode" name="a"/>
				<data source="@relatorNode"/>
			</combine>
		</entity>
		<!-- ####################### -->
		<!-- ################ koerperschaften and persons -->
		<!-- ####################### -->
		<!-- contributors with roles @TODO many roles needs tests -->
		<data
			source="1[02468][048]?[12].[b4]|1[13579][26]?[12].[b4]|2[02468][048]?[12].4|2[13579][26]?[12].4"
			name="@marcrelName"/>
		<!-- id of contributor (which is not a creator) -->
		<data source="1??[bcefp][1234].9" name="@contributorPersonId">
			<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<combine name="@contributorPersonId" value="${a}" sameEntity="true">
			<data source="8[012]?[-mn][-12].b"/>
			<data source="8[012]?[-mn][-12].9" name="a">
				<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
				<sanitizeUrl></sanitizeUrl>
			</data>
		</combine>
		<combine name="$[ns-lobid-vocab]contributorOrder" value="${a}">
			<concat delimiter=" | " name="a">
				<data
					source="@creatorPersonOrCoorporateBodyBnodeOrId|@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId">
					<replace pattern="_:" with=""/>
				</data>
			</concat>
		</combine>
		<!-- ####################### -->
		<!-- #######subjects -->
		<!-- ####################### -->
		<!-- ddc links -->
		<data source="70[05][-b][-12345].a" name="@deweyId">
			<regexp match="([0-9]{3})" format="http://dewey.info/class/${1}/"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<!-- gnd links -->
		<data source="9[01234][27]-[-12].9" name="@subjectLinks">
			<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
			<sanitizeUrl></sanitizeUrl>
		</data>
		<combine name="@subjectNotAPerson" value="${a}" sameEntity="true">
			<data source="9[01234][27]-[-12].[efghkstz]" name="a"/>
			<data source="@subjectLinks"/>
		</combine>
		<!-- This was hard. See hbz/lobid#267 -->
		<combine name="@preferredNamePersonConcatSubjectPC" value="${a}" sameEntity="true"
			flushWith="@subjectLinks">
			<concat delimiter=", " name="a" flushWith="@subjectLinks">
				<data source="9[01234][27]-[-12].[chknp]"/>
			</concat>
		</combine>
		<combine name="@subjectPerson" value="${b}" sameEntity="true">
			<choose name="b" flushWith="@subjectLinks">
				<data source="9[01234][27]-[-12].[efgkstz]">
					<regexp match=".*" format=""/>
				</data>
				<data source="9[01234][27]-[-12].c">
					<regexp match="^Familie"/>
				</data>
				<data source="@preferredNamePersonConcatSubjectPC"/>
			</choose>
		</combine>
		<call-macro name="altLabel" type="Person" field="1?[13579]"/>
		<combine name="~rdf:subject" value="${a}" flushWith="@altLabelPerson">
			<data source="1????.9" name="a">
				<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
				<sanitizeUrl></sanitizeUrl>
			</data>
		</combine>
		<call-macro name="altLabel" type="CorporateBody" field="2?[13579]"/>
		<combine name="~rdf:subject" value="${a}" flushWith="@altLabelCorporateBody">
			<data source="2????.9" name="a">
				<regexp match="\(DE-588\)(.*)" format="http://d-nb.info/gnd/${1}"/>
				<sanitizeUrl></sanitizeUrl>
			</data>
		</combine>
		<data source="@altLabelPerson|@altLabelCorporateBody" name="http://www.w3.org/2004/02/skos/core#altLabel"/>
		<call-macro name="livingStatisticsSetRdfSubject" field="1[0123456789][02468][-abcefmnp][12].d"
			gndId="1[0123456789][02468][-abcefmnp][12].9"/>
		<call-macro name="dateOfBirthMAB100s" field="1[0123456789][02468][-abcefmnp][12].d"
			gndId="1[0123456789][02468][-abcefmnp][12].9"/>
		<call-macro name="dateOfDeathMAB100s" field="1[0123456789][02468][-abcefmnp][12].d"
			gndId="1[0123456789][02468][-abcefmnp][12].9"/>
		<call-macro name="nonYearLivingStatistics" field="1[0123456789][02468][-abcefmnp][12].d"
			gndId="1[0123456789][02468][-abcefmnp][12].9"/>
		<call-macro name="setBackRdfSubject" field="1[0123456789][02468][-abcefmnp][12].9"/>
		<!-- ########### -->
		<!-- # Create subgraph: temporarily set new subjects or contributor id -->
		<!-- ########### -->
		<data name="~rdf:subject"
			source="@bnodeCreatorPersonLabel|@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId|@subjectLinks|@GNDPersonId|@creatorCorporateBodyId|@contributorPersonId|@contributorCorporateBodyId"/>
		<!-- subjects which are persons (and thus the date is to be ignored, see hbz/lobid#244 ) -->
		<combine name="@preferredNamePersonConcatSubject" value="${a}" sameEntity="true"
			flushWith="@GNDPersonId|@contributorPersonId|@preferredNameP">
			<concat delimiter=", " name="a" flushWith="@GNDPersonId|@contributorPersonId|@preferredNameP"
				sameEntity="true">
				<data source="1????.[cghknpsz]|9??[-abcdfep][12-].[chknp]|8[012]?[-mn][-12].[cghknpsz]"/>
			</concat>
		</combine>
		<data source="@subjectLinks" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="http://d-nb.info/gnd/7749153-1"/><!--gnd -->
		</data>
		<!-- subjects which aren't persons (and thus the date needn't be ignored) -->
		<combine name="@preferredNameConcatSubject" value="${a}" sameEntity="true"
			flushWith="@creatorCorporateBodyId|@contributorCorporateBodyId|@subjectNotAPerson">
			<concat delimiter=", " name="a"
				flushWith="@subjectNotAPerson|@creatorCorporateBodyId|@contributorCorporateBodyId"
				sameEntity="true">
				<data
					source="1????.[cghknpsz]|[29]??[-abcdfep][12-].[bcdghknsxz]|8[012]?[-mn][-12].[cghknpsz]"/>
			</concat>
		</combine>
		<!-- START contributor/creator -->
		<combine name="@preferredNameForThePerson" value="${a}" sameEntity="true" reset="true"
			flushWith="@GNDPersonId|@contributorPersonId|@bnodeCreatorPersonLabel|@contributorPersonBnodeOrId">
			<data source="@preferredName|@creatorPersonLabel|@contributorPersonLabel" name="a">
				<replace pattern="&gt;&gt;" with=""/>
				<replace pattern="&lt;&lt;" with=""/>
			</data>
			<data
				source="@GNDPersonId|@contributorPersonId|@bnodeCreatorPersonLabel|@bnodeContributorPersonLabel"/>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://d-nb.info/standards/elementset/gnd#Family"
			flushWith="@subjectLinks">
			<data source="9[01234][27]-[-12].c">
				<regexp match="Familie"/>
			</data>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://d-nb.info/standards/elementset/gnd#Person">
			<data source="@preferredNameForThePerson"/>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://d-nb.info/standards/elementset/gnd#Person"
			flushWith="@preferredNameP">
			<data source="@subjectPerson">
				<regexp match="^[^Familie].*"/>
			</data>
		</combine>
		<combine name="@preferredNameP" value="${a}" sameEntity="true">
			<data source="@subjectLinks"/>
			<data source="9[01234][27]-[-12].p" name="a">
				<replace pattern="&gt;&gt;" with=""/>
				<replace pattern="&lt;&lt;" with=""/>
			</data>
		</combine>
		<combine name="@preferredNameSemicolon" value="${a}: ${b}" sameEntity="true">
			<data source="@preferredNameP" name="a"/>
			<data source="9[01234][27]-[-12].t" name="b">
				<replace pattern="&gt;" with=""/>
				<replace pattern="&lt;" with=""/>
			</data>
		</combine>
		<choose name="@preferredNameForTheWork" flushWith="@subjectLinks">
			<data source="@preferredNameSemicolon"/>
			<data source="9[01234][27]-[-12].t"/>
		</choose>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://d-nb.info/standards/elementset/gnd#Work">
			<data source="@preferredNameForTheWork"/>
		</combine>
		<!-- default, generic type -->
		<combine name="@preferredNameForTheSubjectHeading" value="${a}" sameEntity="true">
			<data source="9[01234][27]-[-12].[szf]"/>
			<data source="@preferredName" name="a"/>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="http://d-nb.info/standards/elementset/gnd#SubjectHeading">
			<data source="@preferredNameForTheSubjectHeading"/>
		</combine>
		<combine name="@preferredNameForThePlaceOrGeographicName" value="${a}"
			sameEntity="true">
			<data source="@subjectLinks"/>
			<data source="9[01234][27]-[-12].g"/>
			<data source="@preferredNameConcatSubject" name="a"/>
		</combine>
		<combine name="$[ns-gnd]dateOfBirth" value="${a}" sameEntity="true">
			<data source="@subjectLinks"/>
			<data source="@preferredNameP"/>
			<choose name="a" flushWith="9[01234][27]-[-12].d" sameEntity="true">
				<data source="9[01234][27]-[-12].d">
					<regexp match="^([012][0-9]{3})-" format="${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^([1-9][0-9]{2})-" format="0${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^([1-9][0-9])-" format="00${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^([0-9])-" format="000${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^v([012][0-9]{3})-" format="-${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^v([1-9][0-9]{2})-" format="-0${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^v([1-9][0-9])-" format="-00${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="^v([0-9])-" format="-000${1}"/>
				</data>
			</choose>
		</combine>
		<combine name="$[ns-gnd]dateOfDeath" value="${a}" sameEntity="true">
			<data source="@subjectLinks"/>
			<data source="@preferredNameP"/>
			<choose name="a" flushWith="9[01234][27]-[-12].d" sameEntity="true">
				<data source="9[01234][27]-[-12].d">
					<regexp match="-([012][0-9]{3})$" format="${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-([1-9][0-9]{2})$" format="0${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-([1-9][0-9])$" format="00${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-([0-9])$" format="000${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-v([012][0-9]{3})$" format="-${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-v([1-9][0-9]{2})$" format="-0${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-v([1-9][0-9])$" format="-00${1}"/>
				</data>
				<data source="9[01234][27]-[-12].d">
					<regexp match="-v([0-9])$" format="-000${1}"/>
				</data>
			</choose>
		</combine>
		<combine name="$[ns-gnd]dateOfBirthAndDeath" value="${a}" sameEntity="true">
			<data source="@subjectLinks"/>
			<data source="@preferredNameP"/>
			<data source="9[01234][27]-[-12].d" name="a">
				<regexp match="^ca\..*|.*Jh\."/>
			</data>
		</combine>
		<combine name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" value="${a}"
			flushWith="@subjectLinks|@creatorCorporateBodyId|@contributorCorporateBodyBnodeOrId"
			sameEntity="true">
			<choose name="a"
				flushWith="@subjectLinks|@creatorCorporateBodyId|@contributorCorporateBodyBnodeOrId"
				sameEntity="true">
				<data source="@preferredNameConcatEventE">
					<constant value="$[ns-gnd]ConferenceOrEvent"/>
				</data>
				<data source="@preferredNameForThePlaceOrGeographicName|@nameOfCreatingCorporateBodyG">
					<constant value="$[ns-gnd]PlaceOrGeographicName"/>
				</data>
				<data
					source="9[01234][27]-[-12].k|@creatorCorporateBodyId|@contributorCorporateBodyBnodeOrId">
					<constant value="$[ns-gnd]CorporateBody"/>
				</data>
			</choose>
		</combine>
		<choose name="@preferredName" sameEntity="true"
			flushWith="@subjectLinks|@preferredNameP|@GNDPersonId|@creatorCorporateBodyId|@contributorPersonId|@contributorCorporateBodyId">
			<data source="@preferredNameConcatEventENDC"/>
			<data source="@preferredNameConcatEventEDC"/>
			<data source="@preferredNameConcatEventE"/>
			<data source="@nameOfCreatingCorporateBody"/>
			<data source="@nameOfContributingCorporateBody"/>
			<data source="@preferredNameSemicolon"/>
			<data source="@preferredNamePersonConcatSubject"/>
			<data source="@nameOfSubjectCorporateBody"/>
			<data source="@preferredNameConcatSubject"/>
			<data source="9[01234][27]-[-12].t"/>
		</choose>
		<choose name="@preferredName" flushWith="@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId"
			sameEntity="true">
			<data source="@preferredNamePersonConcatSubject"/>
			<data source="@contributorPersonLabel|@contributorCoorporateBodyLabel"/>
		</choose>
		<choose name="@preferredName" flushWith="@bnodeCreatorPersonLabel">
			<data source="preferredNamePersonConcatSubject"/>
			<data source="@creatorPersonLabel"/>
		</choose>
		<data source="@preferredName" name="http://www.w3.org/2000/01/rdf-schema#label">
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<combine name="@relator" value="${a}">
			<choose name="a"
				flushWith="@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId|@creatorPersonOrCoorporateBodyBnodeOrId">
				<!-- map literals to marc relator property -->
				<data source="@marcrelName" name="a">
					<regexp match="[dD]ars|^\[act\]$|^(act)$" format="http://id.loc.gov/vocabulary/relators/act"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[hH]rsg|^\[edt\]$|^(edt)$" format="http://id.loc.gov/vocabulary/relators/edt"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[bB]egr" format="http://id.loc.gov/vocabulary/relators/org"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="^\[isb\]$|^(isb)$" format="http://id.loc.gov/vocabulary/relators/isb"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[rR]egi|^\[drt\]$|^(drt)$" format="http://id.loc.gov/vocabulary/relators/drt"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="bers|^\[trl\]$|^(trl)$" format="http://id.loc.gov/vocabulary/relators/trl"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[iI]ll|[zZ]eichn" format="http://id.loc.gov/vocabulary/relators/ill"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[aA]rtist|^\[art\]$|^(art)$" format="http://id.loc.gov/vocabulary/relators/art"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[mM]itarb|^\[clb\]$|^(clb)$" format="http://id.loc.gov/vocabulary/relators/clb"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match=".*[oO]togr.*|^\[pht\]$|^(pht)$" format="http://id.loc.gov/vocabulary/relators/pht"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match=".*[dD]ir|^\[cnd\]$|^(cnd)$" format="http://id.loc.gov/vocabulary/relators/cnd"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[kK]omp|^\[cmp\]$|^(cmp)$" format="http://id.loc.gov/vocabulary/relators/cmp"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[vV]orw|^\[aui\]$|^(aui)$" format="http://id.loc.gov/vocabulary/relators/aui"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[lL]ibr" format="http://id.loc.gov/vocabulary/relators/lbt"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[dD]rehb|^\[aus\]$|^(aus)$" format="http://id.loc.gov/vocabulary/relators/aus"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[sS]ammler|^\[col\]$|^(col)$" format="http://id.loc.gov/vocabulary/relators/col"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[bB]eitr|^\[ctb\]$|^(ctb)$" format="http://id.loc.gov/vocabulary/relators/ctb"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[sS]precher" format="http://id.loc.gov/vocabulary/relators/spk"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[kK]amera|^\[cng\]$|^(cng)$" format="http://id.loc.gov/vocabulary/relators/cng"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[vV]orl|^\[ant\]$|^(ant)$" format="http://id.loc.gov/vocabulary/relators/ant"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[gG]esang|sng|Alt|Bariton|Bass|Baß|Sopr|Ten" format="http://id.loc.gov/vocabulary/relators/sng"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[iI]nterviewer|^\[ivr\]$|^(ivr)$" format="http://id.loc.gov/vocabulary/relators/ivr"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[iI]nterviewter|^\[ive\]$|^(ive)$" format="http://id.loc.gov/vocabulary/relators/ive"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[kK]artogra|^\[ctg\]$|^(ctg)$" format="http://id.loc.gov/vocabulary/relators/ctg"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[mM]usi|^\[mus\]$|^(mus)$" format="http://id.loc.gov/vocabulary/relators/mus"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[iI]nstr|Harfe|Gitarre|Klavier|Org" format="http://id.loc.gov/vocabulary/relators/itr"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[nN]ach|^\[aft\]$|^(aft)$" format="http://id.loc.gov/vocabulary/relators/aft"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[lL]tg" format="http://id.loc.gov/vocabulary/relators/led"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[pP]rod|^\[pro\]$|^(pro)$" format="http://id.loc.gov/vocabulary/relators/pro"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[sS]techer|^\[egr\]$|^(egr)$" format="http://id.loc.gov/vocabulary/relators/egr"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[wW]idmun|^\[dte\]$|^(dte)$" format="http://id.loc.gov/vocabulary/relators/dte"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[rR]ed" format="http://id.loc.gov/vocabulary/relators/red"/>
				</data>
				<data source="104f1.p" name="a">
					<regexp match=".*" format="http://id.loc.gov/vocabulary/relators/hnr"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="^\[hnr\]$|^(hnr)$" format="http://id.loc.gov/vocabulary/relators/hnr"/>
				</data>
				<data source="1??e[1234].p" name="a">  <!-- see #150 -->
					<regexp match=".*" format="http://id.loc.gov/vocabulary/relators/prf"/>
				</data>
				<data source="@marcrelName" name="a">
					<regexp match="[iI]nterpr|^\[prf\]$|^(prf)$" format="http://id.loc.gov/vocabulary/relators/prf"/>
				</data>
				<!-- default -->
				<data source="@contributorCorporateBodyBnodeOrId" name="a">
					<regexp match=".*" format="http://id.loc.gov/vocabulary/relators/ctb"/>
				</data>
				<data source="@contributorPersonBnodeOrId" name="a">
					<regexp match=".*" format="http://id.loc.gov/vocabulary/relators/ctb"/>
				</data>
				<!-- always creator -->
				<data source="@creatorPersonOrCoorporateBodyBnodeOrId" name="a">
					<regexp match=".*" format="http://id.loc.gov/vocabulary/relators/cre"/>
				</data>
			</choose>
		</combine>
		<!-- END contributor/creator -->
		<!-- ########### -->
		<!-- # set subject uri of resource anew -->
		<!-- ########### -->
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!">
			<data
				source="@bnodeCreatorPersonLabel|@contributorPersonBnodeOrId|@contributorCorporateBodyBnodeOrId|@agentId|@altLabelPerson|@altLabelCorporateBody|@subjectLinks|@GNDPersonId|@creatorCorporateBodyId|@contributorPersonId|@contributorCorporateBodyId|@subjectTopic|@subjectMain"/>
			<data source="@id" name="subject"/>
		</combine>
		<!-- other subjects -->
		<data source="71[01][-abcdfz][123].a" name="http://purl.org/lobid/lv#subjectAltLabel">
			<split delimiter=" / "/>
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<!-- "Verweisungsformen" literals -->
		<data source="9[56][27]-[12].[acefgkps]" name="@subjectMain">
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<combine name="@subjectTopic" value="${main}. ${b}" sameEntity="true">
			<data source="@subjectMain" name="main"/>
			<data source="9[56][27]-[12].b" name="b"/>
		</combine>
		<combine name="@subjectTopic" value="${main} / ${x}" sameEntity="true">
			<data source="@subjectMain" name="main"/>
			<data source="9[56][27]-[12].x" name="x"/>
		</combine>
		<combine name="@subjectTopic" value="${main} (${z})" sameEntity="true">
			<data source="@subjectMain" name="main"/>
			<data source="9[56][27]-[12].[cdhmortuz]" name="z"/>
		</combine>
		<choose name="http://purl.org/lobid/lv#subjectAltLabel" flushWith="9[56][27]-[12]">
			<data source="@subjectTopic"/>
			<data source="@subjectMain"/>
		</choose>
		<!-- Schlagwortketten (aka "subject chains", "complex subjects" ..), mixed with nwbib speciality -->
		<call-macro name="doubledPreferredNameSubjectChain" field="902"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="902"/>
		<call-macro name="makeNwbibComplexSubjectId" field="902"/>
		<call-macro name="setNwbibRdfSubject" field="902"/>
		<data source="@nwbibComplexSubjectRswkLabel902" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel902" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="902"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="902"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="902"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="902"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="902"/>
		<call-macro name="nwbibSetLobidSubject" field="902"/> <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="902" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="902" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="902" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="902" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="902" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="902" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="902" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="902" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="902" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="902" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="907"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="907"/>
		<call-macro name="makeNwbibComplexSubjectId" field="907"/>
		<call-macro name="setNwbibRdfSubject" field="907"/>
		<data source="@nwbibComplexSubjectRswkLabel907" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel907" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="907"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="907"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="907"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="907"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="907"/>
		<call-macro name="nwbibSetLobidSubject" field="907"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="907" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="907" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="907" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="907" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="907" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="907" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="907" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="907" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="907" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="907" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="912"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="912"/>
		<call-macro name="makeNwbibComplexSubjectId" field="912"/>
		<call-macro name="setNwbibRdfSubject" field="912"/>
		<data source="@nwbibComplexSubjectRswkLabel912" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel912" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="912"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="912"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="912"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="912"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="912"/>
		<call-macro name="nwbibSetLobidSubject" field="912"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="912" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="912" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="912" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="912" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="912" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="912" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="912" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="912" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="912" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="912" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="917"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="917"/>
		<call-macro name="makeNwbibComplexSubjectId" field="917"/>
		<call-macro name="setNwbibRdfSubject" field="917"/>
		<data source="@nwbibComplexSubjectRswkLabel917" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel917" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="917"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="917"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="917"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="917"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="917"/>
		<call-macro name="nwbibSetLobidSubject" field="917"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="917" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="917" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="917" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="917" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="917" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="917" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="917" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="917" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="917" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="917" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="922"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="922"/>
		<call-macro name="makeNwbibComplexSubjectId" field="922"/>
		<call-macro name="setNwbibRdfSubject" field="922"/>
		<data source="@nwbibComplexSubjectRswkLabel922" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel922" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="922"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="922"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="922"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="922"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="922"/>
		<call-macro name="nwbibSetLobidSubject" field="922"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="922" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="922" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="922" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="922" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="922" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="922" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="922" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="922" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="922" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="922" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="927"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="927"/>
		<call-macro name="makeNwbibComplexSubjectId" field="927"/>
		<call-macro name="setNwbibRdfSubject" field="927"/>
		<data source="@nwbibComplexSubjectRswkLabel927" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel927" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="927"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="927"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="927"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="927"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="927"/>
		<call-macro name="nwbibSetLobidSubject" field="927"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="927" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="927" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="927" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="927" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="927" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="927" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="927" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="927" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="927" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="927" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="932"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="932"/>
		<call-macro name="makeNwbibComplexSubjectId" field="932"/>
		<call-macro name="setNwbibRdfSubject" field="932"/>
		<data source="@nwbibComplexSubjectRswkLabel932" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel932" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="932"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="932"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="932"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="932"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="932"/>
		<call-macro name="nwbibSetLobidSubject" field="932"/> <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="932" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="932" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="932" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="932" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="932" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="932" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="932" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="932" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="932" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="932" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="937"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="937"/>
		<call-macro name="makeNwbibComplexSubjectId" field="937"/>
		<call-macro name="setNwbibRdfSubject" field="937"/>
		<data source="@nwbibComplexSubjectRswkLabel937" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel937" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="937"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="937"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="937"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="937"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="937"/>
		<call-macro name="nwbibSetLobidSubject" field="937"/> <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="937" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="937" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="937" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="937" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="937" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="937" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="937" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="937" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="937" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="937" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="942"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="942"/>
		<call-macro name="makeNwbibComplexSubjectId" field="942"/>
		<call-macro name="setNwbibRdfSubject" field="942"/>
		<data source="@nwbibComplexSubjectRswkLabel942" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel942" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="942"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="942"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="942"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="942"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="942"/>
		<call-macro name="nwbibSetLobidSubject" field="942"/>  <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="942" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="942" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="942" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="942" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="942" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="942" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="942" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="942" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="942" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="942" indicator2="2"/>

		<call-macro name="doubledPreferredNameSubjectChain" field="947"/>
		<call-macro name="nwbibComplexSubjectRswkLabel" field="947"/>
		<call-macro name="makeNwbibComplexSubjectId" field="947"/>
		<call-macro name="setNwbibRdfSubject" field="947"/>
		<data source="@nwbibComplexSubjectRswkLabel947" name="http://www.w3.org/2000/01/rdf-schema#label"/>
		<data source="@nwbibComplexSubjectRswkLabel947" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<constant value="http://d-nb.info/standards/elementset/gnd#SubjectHeading"/>
		</data>
		<call-macro name="nwbibSetLobidSubject" field="947"/>
		<call-macro name="nwbibSubjectRswkIdSetDctSubject" field="947"/>
		<call-macro name="nwbibSubjectRswkIdSetRdfSubject" field="947"/>
		<call-macro name="nwbibSubjectRswkIdSetType" field="947"/>
		<call-macro name="nwibSetComplexSubjectRswkId" field="947"/>
		<call-macro name="nwbibSetLobidSubject" field="947"/> <!-- important to keep right order -->
		<call-macro name="subjectRswkId" field="947" indicator2="1"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="947" indicator2="1"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="947" indicator2="1"/>
		<call-macro name="subjectRswkIdSetType" field="947" indicator2="1"/>
		<call-macro name="complexSubjectRswkId" field="947" indicator2="1"/>
		<!-- superordinate subject -->
		<call-macro name="subjectRswkId" field="947" indicator2="2"/>
		<call-macro name="subjectRswkIdSetDctSubject" field="947" indicator2="2"/>
		<call-macro name="subjectRswkIdSetRdfSubject" field="947" indicator2="2"/>
		<call-macro name="subjectRswkIdSetType" field="947" indicator2="2"/>
		<call-macro name="complexSubjectRswkId" field="947" indicator2="2"/>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!"
			flushWith="@complexSubjectRswkId9[01234][27]@nwbibComplexSubjectRswkId9[01234][27]">
			<data source="@complexSubjectRswkId9[01234][27]|@nwbibComplexSubjectRswkId9[01234][27]"/>
			<data source="@id" name="subject"/>
		</combine>
		<!-- /Schlagwortketten (aka "subject chains", "complex subjects" ...) -->
		<!--|@subjectLabelBnode ############ "schlagwortketten" (aka subject chains) as ordered lists -->
		<entity name="~rdf:list" reset="true">
			<data name="$[ns-lobid-vocab]subjectOrder" source="@subjectOrder"/>
		</entity>
		<call-macro name="subjectOrder" field="902"/>
		<call-macro name="subjectOrder" field="907"/>
		<call-macro name="subjectOrder" field="912"/>
		<call-macro name="subjectOrder" field="917"/>
		<call-macro name="subjectOrder" field="922"/>
		<call-macro name="subjectOrder" field="927"/>
		<call-macro name="subjectOrder" field="932"/>
		<call-macro name="subjectOrder" field="937"/>
		<call-macro name="subjectOrder" field="942"/>
		<call-macro name="subjectOrder" field="947"/>
		<!-- subjects without ID -->
		<call-macro name="dctSubject" field="902"/>
		<call-macro name="dctSubject" field="907"/>
		<call-macro name="dctSubject" field="912"/>
		<call-macro name="dctSubject" field="917"/>
		<call-macro name="dctSubject" field="922"/>
		<call-macro name="dctSubject" field="927"/>
		<call-macro name="dctSubject" field="932"/>
		<call-macro name="dctSubject" field="937"/>
		<call-macro name="dctSubject" field="942"/>
		<call-macro name="dctSubject" field="947"/>
		<!-- ####################### -->
		<!-- ##########fulltext, toc, seeAlso -->
		<!-- ####################### -->
		<data source="051." name="@archived">
			<regexp match="^.w" format="$[ns-lobid-vocab]ArchivedWebPage"/>
		</data>
		<data source="@archived" name="@rdftype"/>
		<combine name="@fulltextOnline" value="${link}">
			<data source="334-[12].a">
				<regexp match="^[eEcC][lLoO]"/>
			</data>
			<data source="@linkUri" name="link">
				<regexp match="^([a-zA-Z].*)" format="${1}"/>
			</data>
		</combine>
		<combine name="@linkForDescription" value="${a}" sameEntity="true">
			<data source="655e[ -1].[x3]" name="a">
				<regexp match="[Ii][Nn][Hh][aA][lL][tT][sS][tT]"/>
			</data>
			<data source="655e[ -1].u" name="a"/>
		</combine>
		<combine name="@linkForTableOfContents" value="${a}" sameEntity="true">
			<data source="655e[ -1].[x3]" name="a">
				<regexp match="[Ii][Nn][Hh][aA][lL][tT][sS][vV]"/>
			</data>
			<data source="655e[ -1].u" name="a"/>
		</combine>
		<!--first three chars of "Resolving System" or "Volltext" or "EZB" or "Archivierte Online 
			Ressource " or "Online-Ausgabe" <=> @fulltextOnlineUri> -->
		<combine name="@fulltextOnlineUri" value="${a}" sameEntity="true">
			<data source="655[-eu][ -1].[x3]">
				<regexp match="Archivierte Online|EZB|Online-Ausg|Resolving-System|Volltext"/>
			</data>
			<data source="@linkUri" name="a"/>
		</combine>
		<combine name="@fulltextOnlineUri" value="${a}" sameEntity="true">
			<data source="@linkUri" name="a">
				<regexp match="http:\/\/dx.doi.org\/.*|http:\/\/nbn-resolving.de\/urn.*"/>
			</data>
		</combine>
		<!-- emit URI only if there are no description subfields ... -->
		<choose name="@urlLonely" flushWith="655[-eu][ -1]">
			<data source="655[-eu][ -1].[xy3]"/>
			<data source="@linkUri"/>
		</choose>
		<!-- ... check if URI and if it's of type "webPageArchived" to determine if it's the archived 
			web source. URL musn't be an edoweb one. -->
		<combine name="@655edoweb" value="${a}">
			<choose name="a">
				<data source="655e1.u" name="a">
					<regexp match="^(?!http.?://.*edoweb).*$"/>
				</data>
				<data source="655e1.u" name="a">
					<regexp match=".*" format="ignore"/>
				</data>
			</choose>
		</combine>
		<combine name="$[ns-lobid-vocab]webPageArchived" value="${uri}">
			<data source="@655edoweb" name="uri">
				<regexp match="http.*"/>
			</data>
			<data source="@archived"/>
		</combine>
		<data source="@fulltextOnlineUri" name="$[ns-lobid-vocab]fulltextOnline">
			<sanitizeUrl></sanitizeUrl>
		</data>
		<combine name="http://purl.org/dc/terms/hasVersion" value="${a}">
			<if>
				<none>
					<data source="655e1.[x3]">
						<regexp match="[vV][oO][lL][lL][tT][eE][xX][tT]"/>
					</data>
					<data source="@linkForDescription"/>
					<data source="@linkForTableOfContents"/>
				</none>
			</if>
			<data source="@linkUri" name="a">
				<sanitizeUrl></sanitizeUrl>
			</data>
		</combine>
		<combine name="http://purl.org/dc/terms/hasVersion" value="${a}">
			<if>
				<none>
					<data source="552b1.a">
						<regexp match=".*urn.*"/>
					</data>
					<data source="552b1.a">
						<regexp match="http:\/\/dx.doi.org\/.*"/>
					</data>
				</none>
			</if>
			<data source="552b1.a" name="a">
				<regexp match="http.*"/>
			</data>
		</combine>
		<!-- rdf:seeAlso if 655 AND first three letter "Zusätzliche Angaben" -->
		<combine name="http://www.w3.org/2000/01/rdf-schema#seeAlso" value="${seeAlsoUri}"
			sameEntity="true">
			<data source="655[-eu][ -1].[x3]">
				<regexp match="^[zZ][uU][sS]"/>
			</data>
			<data source="@linkUri" name="seeAlsoUri"/>
		</combine>
		<!-- Set label for DOIs -->
		<combine name="~rdf:subject" value="${a}">
			<data source="@fulltextOnlineUri" name="a">
				<regexp match="(.*)dx.doi.org(.*)"/>
			</data>
		</combine>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="DOI-Link"
			sameEntity="true">
			<data source="@fulltextOnlineUri">
				<regexp match="dx.doi.org"/>
			</data>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@fulltextOnlineUri">
			<data source="@id" name="subject"/>
		</combine>
		<!-- Set label for URNs -->
		<combine name="~rdf:subject" value="${a}">
			<data source="@fulltextOnlineUri" name="a">
				<regexp match=".*nbn-resolving.de\/urn.*"/>
			</data>
		</combine>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="URN-Link"
			sameEntity="true">
			<data source="@fulltextOnlineUri">
				<regexp match="nbn-resolving.de\/urn"/>
			</data>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@fulltextOnlineUri">
			<data source="@id" name="subject"/>
		</combine>
		<!-- link to table of content (toc) -->
		<combine name="@toc" value="${uri}" sameEntity="true">
			<data source="655[-eu][ -1].[x3]">
				<regexp match="^[Ii][Nn][Hh][aA][lL][tT][sS][vV]"/>
			</data>
			<data source="@linkUri" name="uri"/>
		</combine>
		<data source="@toc" name="http://purl.org/dc/terms/tableOfContents">
			<sanitizeUrl></sanitizeUrl>
		</data>
		<!-- link to description -->
		<combine name="@desc" value="${uri}" sameEntity="true">
			<data source="655[-eu][ -1].[x3]">
				<regexp match="^[Ii][Nn][Hh][aA][lL][tT][sS][tT]"/>
			</data>
			<data source="@linkUri" name="uri"/>
		</combine>
		<data source="@desc" name="http://purl.org/dc/terms/description"/>
		<!-- ####################### -->
		<!-- ########## source , isPartOf -->
		<!-- ####################### -->
		<concat delimiter="; " name="http://purl.org/dc/terms/bibliographicCitation">
			<data source="59[0123568][-abcd][-12].a">
				<replace pattern="&gt;&gt;" with=""/>
				<replace pattern="&lt;&lt;" with=""/>
			</data>
		</concat>
		<data source="525[-a][-1].a" name="http://purl.org/dc/terms/bibliographicCitation">
			<replace pattern="&gt;&gt;" with=""/>
			<replace pattern="&lt;&lt;" with=""/>
		</data>
		<combine name="http://id.loc.gov/ontologies/bibframe/supplement" value="${a}">
			<choose name="a" flushWith="@supplement" sameEntity="true">
				<data source="@supplement">
					<regexp match="^([A-Z][A-Z].*)" format="$[ns-lobid-resource]${1}#!"/>
				</data>
				<data source="@supplement">
					<regexp match="^(\d{3}.*)" format="$[ns-zdb-services]${1}"/>
				</data>
			</choose>
		</combine>
		<data source="599[-b][-1].[a]" name="@dctIsPartOfHbzIdArticle">
			<regexp match="(.*)" format="$[ns-lobid-resource]${1}#!"/>
		</data>
		<!--s. #333 <data source="599[abcdefgh][-1].a" name="http://purl.org/dc/terms/isPartOf" /> -->
		<data source="599s[-1].a" name="@dctIsPartOfArticle">
			<regexp match="(.*)" format="$[ns-zdb-services]${1}"/>
		</data>
		<call-macro name="createEntityForHasSuperordinateWithoutIdWithNumbering"
			field_1="453[-abr][-12].a" field_2="451[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdWithNumbering"
			field_1="463[-abr][-12].a" field_2="461[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdWithNumbering"
			field_1="473[-abr][-12].a" field_2="471[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdWithNumbering"
			field_1="483[-abr][-12].a" field_2="481[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdWithNumbering"
			field_1="493[-abr][-12].a" field_2="491[-ab]1.a"/>
		<!-- isPartOf with 4[56789]1 and number and 4[56789]3, in the test data there is no resource 
			with 4[56789]5 but no numbering in 4[56789]1 -->
		<entity name="$[ns-lobid-vocab]isPartOf" flushWith="4[56789]3[-ab]1.a" reset="true">
			<data source="4[56789][13][-abr][-12].a" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
				<regexp match=".*" format="$[ns-lobid-vocab]IsPartOfRelation"/>
			</data>
			<combine name="$[ns-lobid-vocab]hasSuperordinate" value="$[ns-lobid-resource]${a}#!">
				<data source="4[56789]3[-ab]1.a" name="a"/>
			</combine>
			<combine name="$[ns-lobid-vocab]numbering" value="${a}">
				<data source="4[56789]1[-ab]1.a" name="a">
					<regexp match=".*; (.*)" format="${1}"/>
					<trim></trim>
					<replace pattern="\[|\]" with=""/>
				</data>
			</combine>
		</entity>
		<!-- isPartOf with 4[56789]1 and without numbering and 4[56789]3 -->
		<call-macro name="createEntityForHasSuperordinateWithoutIdAndNumbering"
			field_1="453[-abr][-12].a" field_2="451[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdAndNumbering"
			field_1="463[-abr][-12].a" field_2="461[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdAndNumbering"
			field_1="473[-abr][-12].a" field_2="471[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdAndNumbering"
			field_1="483[-abr][-12].a" field_2="481[-ab]1.a"/>
		<call-macro name="createEntityForHasSuperordinateWithoutIdAndNumbering"
			field_1="493[-abr][-12].a" field_2="491[-ab]1.a"/>
		<combine name="~rdf:subject" value="${a}">
			<data source="025z[2].a" name="a">
				<regexp match="(.*)" format="$[ns-zdb-services]${1}"/>
			</data>
		</combine>
		<data source="025z[2].a" name="http://www.w3.org/1999/02/22-rdf-syntax-ns#type">
			<regexp match=".*" format="$[ns-lobid-vocab]IsPartOfRelation"/>
		</data>
		<call-macro name="setBackRdfSubject" field="025z[2].a"/>
		<data source="@dctIsPartOf" name="~rdf:subject"/>
		<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="Zeitschriftendatenbank (ZDB)">
			<data source="@dctIsPartOf"/>
		</combine>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${subject}#!" flushWith="@dctIsPartOf">
			<data source="@id" name="subject"/>
		</combine>
		<!-- set labels for ids from MAB 450s fields -->
		<call-macro name="setRdfSubject" field="4[56789]3[-ab]1.a"/>
		<call-macro name="setLabelMAB451-491ToId" field_1="4[56789]3[-ab]1.a"
			field_2="4[56789]1[-ab]1.a"/>
		<call-macro name="setBackRdfSubject" field="4[56789]3[-ab]1.a"/>
		<!-- ####################### -->
		<!-- ########## classification -->
		<!-- ####################### -->
		<!--nwbib -->
		<call-macro name="setBackRdfSubject" field="078n[-1].a"/>
		<data source="078n[-1].a" name="http://purl.org/lobid/lv#inCollection">
			<regexp match=".*" format="$[ns-lobid-resource]HT014176012#!"/>
		</data>
		<data source="700n[-1].a" name="@nwbibSubject">
			<regexp match="(\d\d\d\d\d\d)" format="http://purl.org/lobid/nwbib#s${1}"/>
		</data>
		<!-- ignore '99' in e.g. '700n|a 99|b Bonn', but take 'b' to lookup ID's ,see HT018131501 -->
		<combine name="@nwbib700_99" value="${a}" sameEntity="true">
			<data source="700n[-1].a">
				<regexp
					match="^99\b|^97\b|^96\b|^74\b|^72\b|^54\b|^52\b|^37\b|^36\b|^35\b|^28\b|^24\b|^14\b|^12\b|^10\b"/>
			</data>
			<data source="700n[-1].b" name="a"/>
		</combine>
		<!-- geo enrichment nwbib 99 -->
		<data source="@nwbib700_99" name="http://purl.org/dc/elements/1.1/coverage"/>
		<!--some normalizing -->
		<data source="@nwbib700_99" name="@nwbib700_99_id">
			<replace pattern=" " with=""/>
			<replace pattern="/" with=""/>
			<replace pattern="\(.*\)" with=""/>
			<replace pattern="&lt;.*&gt;" with=""/>
			<replace pattern="" with=""/>
			<replace pattern="-" with=""/>
			<replace pattern="," with=""/>
			<replace pattern="/" with=""/>
		</data>
		<combine name="@nwbibSpatialSubject" value="${a}">
			<data source="700n[-1].a" name="a">
				<regexp match="^([0-8][0-8]\b|91\b|96|97)\b" format="http://purl.org/lobid/nwbib-spatial#n${1}"/>
			</data>
		</combine>
		<!--edoweb -->
		<data source="078r1.a" name="@edoweb">
			<regexp match="edoweb"/>
		</data>
		<call-macro name="setBackRdfSubject" field="@edoweb"/>
		<data source="@edoweb" name="http://purl.org/lobid/lv#inCollection">
			<regexp match=".*" format="$[ns-lobid-resource]HT016925914#!"/>
		</data>
		<!-- Fachrepositorium Lebenswissenschaften -->
		<combine name="@ellinet" value="${a}">
			<data source="078r1.a" name="a">
				<regexp match="ellinet"/>
			</data>
		</combine>
		<call-macro name="setBackRdfSubject" field="@ellinet"/>
		<combine name="http://purl.org/lobid/lv#inCollection" value="http://repository.publisso.de">
			<data source="@ellinet"/>
		</combine>
		<combine name="~rdf:subject" value="http://repository.publisso.de">
			<data source="@ellinet"/>
		</combine>
		<data source="078r1.a" name="http://www.w3.org/2000/01/rdf-schema#label">
			<regexp match="ellinet" format="Fachrepositorium Lebenswissenschaften"/>
		</data>
		<!--rheinland pfalz -->
		<data source="700l[-1].a" name="@rpb2Subject">
			<regexp match="^(\d{3})$" format="https://w3id.org/lobid/rpb2#n${1}"/>
		</data>
		<data source="700l[-1].a" name="@rpbSubject">
			<regexp match="^rpb(\d{6})" format="http://purl.org/lobid/rpb#n${1}"/>
		</data>
		<call-macro name="setBackRdfSubject" field="700l[-1].[ab]"/>
		<data source="700l[-1].[ab]" name="http://purl.org/lobid/lv#inCollection">
			<regexp match="^rpb.*" format="$[ns-lobid-resource]HT013494180#!"/>
		</data>
		<combine value="_:${a}" name="http://purl.org/dc/terms/subject">
			<data source="700l[-1].a" name="a"/>
		</combine>
		<combine value="_:${a}" name="~rdf:subject">
			<data source="700l[-1].a" name="a"/>
		</combine>
		<data source="700l[-1].a" name="http://www.w3.org/2004/02/skos/core#notation">
			<regexp match="^rpbr.*"/>
		</data>
		<entity name="http://id.loc.gov/ontologies/bibframe/source">
			<combine name="http://www.w3.org/2000/01/rdf-schema#label" value="RPB-Raumsystematik">
				<data source="700l[-1].a">
					<regexp match="^rpbr.*"/>
				</data>
			</combine>
		</entity>
		<call-macro name="setBackRdfSubject" field="700l[-1].a"/>

		<!-- ####################### -->
		<!-- ########## isbn -->
		<!-- ####################### -->
		<data source="540[-ab][-1].[ab]" name="$[ns-bibo]isbn">
			<isbn to="clean"/>
		</data>
		<data source="540[-ab][-1].[ab]" name="$[ns-bibo]isbn">
			<isbn to="isbn13"/>
		</data>
		<!--ISMN -->
		<data source="541[-ab][-12].[ab]" name="http://purl.org/ontology/mo/ismn">
			<replace pattern="-| " with=""/>
		</data>
		<!-- ISSN -->
		<data source="542[-ab][-1].[a]" name="$[ns-bibo]issn">
			<replace pattern="-| " with=""/>
		</data>
		<!-- ####################### -->
		<!-- ########## abstract -->
		<!-- ####################### -->
		<data source="750?[-1].a" name="http://purl.org/dc/terms/abstract"/>
		<!-- ####################### -->
		<!-- ########## note -->
		<!-- ####################### -->
		<choose name="http://id.loc.gov/ontologies/bibframe/note">
			<data source="501-1.a">
				<regexp match="^(http.*)" format="Siehe: ${1}"/>
			</data>
			<data source="501-1.a"/>
		</choose>
		<!-- ####### sources of the subjects - for GND search 7749153-1 -->
		<data source="@nwbibSubject|@nwbibSpatialSubject|@rpb2Subject|@rpbSubject|@deweyId"
			name="~rdf:subject"/>
		<data source="@nwbibSubject" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="http://purl.org/lobid/nwbib"/> <!--nwbib -->
		</data>
		<data source="@nwbibSpatialSubject" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="http://purl.org/lobid/nwbib-spatial"/> <!--nwbib-spatial -->
		</data>
		<data source="@rpb2Subject" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="https://w3id.org/lobid/rpb2"/> <!--rpb2 -->
		</data>
		<data source="@rpbSubject" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="https://w3id.org/lobid/rpb"/> <!--rpb -->
		</data>
		<data source="@deweyId" name="http://id.loc.gov/ontologies/bibframe/source">
			<constant value="http://d-nb.info/gnd/4149423-4"/><!--dewey -->
		</data>
		<combine name="~rdf:subject" value="$[ns-lobid-resource]${id}#!"
			flushWith="@nwbibSubject|@nwbibSpatialSubject|@rpb2Subject|@rpbSubject|@deweyId">
			<data source="@id" name="id"/>
		</combine>
		<!-- /sources of the subjects -->
		<!-- ####################### -->
		<!-- ############### statistics -->
		<!-- ####################### -->
		<!-- <data source="_else"/> -->
	</rules>
	<!-- ####################### -->
	<!-- ########### maps -->
	<!-- ####################### -->
	<maps>
		<filemap name="sigel2isilMap" files="sigel2isilMap.csv"/>
		<filemap name="iso639xToIso639-3-Map" files="iso639xToIso639-3-Map.tsv"/>
	</maps>
</metamorph>
